Grigory Kislin [7:16 AM]
joined #hw8.

Grigory Kislin [7:17 AM]
Как и обещал, в 8м уроке: CSS (Bootstrap), JavaScript (jQuery + plugins), AJAX
+ добавление к REST контроллерам базовой авторизации (в UI и тесты добавим на следующем уроке)
https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson08.md
Успехов! (edited)

Constantine [7:19 AM]
joined #hw8 along with 8 others.

Ilya [8:11 AM]
Я один не могу патчи выкачать ?

This site can’t be reached
takeout.google.com refused to connect.
Try:

Checking the connection
Checking the proxy and the firewall
ERR_CONNECTION_REFUSED
мдам, только vpn спасает :confused: видать последствия маразма ркн

Alexander_Gubanow [8:15 AM]
joined #hw8 along with 9 others.

pro [9:13 AM]
хорошо, что vpn еще не прикрыли) любая война людей с людьми по большому счету - маразм; интересно, на сколько лет бы люди могли законсервировать энергетические сырьевые месторождения, возьмись они кидать в "топку" свои заготовленные ракеты

realcorwin [10:30 AM]
никто не заставляет Гугл помогать телеграмм обходить законы

Dzmitry Shalukhau [10:31 AM]
@realcorwin проблема не в этом, а в том. что никто не заставляет РКН думать и отвечать за промахи
Гугл не помогает - он просто предоставляет сервис всем. А люди из-за тупых блокировок теряют деньги (время/силы/бизнес)

realcorwin [10:33 AM]
это не тупые блокировки. это исполнение закона. которые призван уберечь людей
впрочем, это флуд здесь

Dzmitry Shalukhau [10:33 AM]
Именно, что тупые. Если бы были не тупые - блокировали бы конкретные ресурсы, а не массово. В общем, во флуд


Valery.Shkerdin [10:37 AM]
#flooding вам туда )

Grigory Kislin [10:39 AM]
*добавил еще мелкие правки - патч: 8_10_fix.patch*
*https://drive.google.com/open?id=1VWBMA2Kd6Jq5DAWYJkzwlHjWHFeFc80F* (edited)


Dmitry Neustupov [3 days ago]
У меня одного 404 по ссылке?


Zhivchik [2 days ago]
у меня тоже


realcorwin [2 days ago]
https://drive.google.com/drive/folders/0B9Ye2auQ_NsFfjZuOHczMzBHX2p1RXBFZWdISS1zTFZqYzYzSzA4dk9tb0N5ZkFUUW44YjQ


Grigory Kislin [2 days ago]
ссылку поправил. гугл чтото глючит. а так- да, вместе со всеми патчами лежит


aleksey [3:35 PM]
Следующее занятие будет по расписанию?


Grigory Kislin [Apr 26th at 4:40 PM]
in #hw8
все по расписанию


1 reply
Vyacheslav [2 days ago]
Товарищ лектор. Нужно ли ждать письмо на почту, или можно патчи из этого урока накатывать?


Vyacheslav [6:27 PM]
Архив не создается, но патчи можно выкачать по одному? Там еще icon-meal.png лежит. Он нужен?

Yevhen Maksymovych [8:12 PM]
Григорий, а доступ к папкам после окончания стажировки останется? я, как, думаю, и большинство, ролики смотрю, но часть материала текстового оставляю на "авось потом перечитаю", а щаз подумал, что половина стажировки-то уже прошла, и перечитывать уже скоро может стать нечего


Dmitry Neustupov [2 days ago]
останется


Grigory Kislin [1 day ago]
да, все останется на google drive
как в папке topjava12


qf05 [Apr 26th at 8:19 PM]
in #hw8
а это нормально, что кнопка edit не работает?


1 reply
Dmitry Neustupov [2 days ago]
нормально


qf05 [Apr 26th at 8:37 PM]
in #hw8
поясните пожалуйста, id элемента должно быть уникально на странице или во всём проекте? например можно ли использовать в meal.jsp id=editRow если такой же id используется в user.jsp?


2 replies
Oleksii Leshchenko [2 days ago]
Id уникальный на весь проект - один сиквенс в БД на все


tema.emelyan [2 days ago]
На странице


alexey [Apr 26th at 9:25 PM]
in #hw8
народ а версия  spring-security-web в pom.xml  у всех светится  красным или только у меня? и в security.xml половина кода красная (edited)


3 replies
Эрик [1 day ago]
а какая версия у тебя прописана?
Reimport all maven projects не помогает?


alexey [1 day ago]
там версия от спринга стоит. Пробовал не помогло


alexey [1 day ago]
Решилось откатом на насколько патчей назад)


SergeyMuratkin [5:34 PM]
Нет, у меня  нормально всё. security.xml нет такого файла мы меняли его на spring-security.xml
alexey
народ а версия  spring-security-web в pom.xml  у всех светится  красным или только у меня? и в security.xml половина кода красная
Posted in #hw8Apr 26th


Ma3stro [Yesterday at 5:41 AM]
in #hw8
Как не сойти с ума от передоза новой информации и непонятных конструкций? .-._-._-.


1 reply
Fedor [2 hours ago]
Знакомо это. Я делаю шаг в сторону, смотрю бегло какой нибудь курс по новой теме, потом возвращаюсь. Видео курсы легче воспринимаются, чем скакание по ссылкам


aleksey [5:51 AM]
@Ma3stro и молись чтобы тебе не пришлось работать с фронтэндом на тех технологиях которым тут учат.

V-E-S-T [9:33 AM]
а на каких технологиях лучше работать с фронтэндом? какая связка с java бэкэндом предпочтительнее на ваш взгляд?


alexey [Yesterday at 9:37 AM]
in #hw8
Доброе утро. Народ подскажите в datatablesUtil.js функция save будет ведь одинаковая и для user и для meal?


1 reply
Zhivchik [15 hours ago]
Да. В datatablesUtil.js находятся общие скрипты


aleksey [10:29 AM]
@V-E-S-T чаще всего вместе с Java используют Angular. Я неплохо знаю vueJs, в кратце с тех пор как писался этот курс на фронте уже пару раз все с ног на голову перевернулось и инструменты и современный подход к построению приложений гораздо удобнее.


Zhivchik [10:52 AM]
added and commented on this Plain Text snippet: Untitled 
Т.к. HTML атрибут id у каждого элемента документа должен быть уникален, нужно избавиться от дублирования id="${user.id}" в строках таблиц users и meals
Это имеется в виду дублирование id в ссылках ячеек update и delete?

realcorwin [11:39 AM]
Сейчас вроде Angular с TypeScript используют. Файн книжку написал, скоро второе издание выйти должно
https://www.manning.com/books/angular-development-with-typescript-second-edition
Manning Publications
Angular Development with Typescript, Second Edition
A very fine update on developing top-grade applications with Angular using TypeScript.
https://images.manning.com/720/960/resize/book/4/b5c65d8-4ddb-4bf6-ae79-d37f84e9bbc6/Fain-Angular-2ed-MEAP-HI.png
недавно Немчинский лекцию про сравнение стеков J2EE и спринга читал. суть была в том, что юниоры гораздо быстрее въезжают в J2EE, чем в спринг. во многом и потому, что у J2EE своя морда есть, а у спринга - нет

tema.emelyan [11:54 AM]
мне кажется тут не было цели использовать передовые технологии фрон енд разработки, курс по беку всё-таки. целый фронт фрейм-ворк цеплять сюда это уже через чур наверное. а jquery как раз самый минимум, чтобы хоть что-то было.


dustnfox [Yesterday at 1:33 PM]
in #hw8
Друзья, что сие означает?
>Реализовать добавление записи еды через модальное окно Bootstrap и удаление еды по ajax _(БЕЗ редактирования)_
Нам нужно update для еды реализовывать или как? Просто следующий пункт про дублирование id HTML, а он имеет смысл только если делать edit.


7 replies
Oleksii Leshchenko [11 hours ago]
> добавление записи еды через модальное окно Bootstrap
У Бутсрап есть возможность создать свои кастомные формы. Т.е. создать свое диалоговое окно. Оно спрятано до поры до времени. При нажатии на кнопку появляется...


Oleksii Leshchenko [11 hours ago]
> удаление еды по ajax
при нажатии на кнопку Delete должен отправлять ajax-запрос


dustnfox [11 hours ago]
Да это все вроде как понятно.  Уточнение про _без редактирования_ что означает в данном контексте?


Oleksii Leshchenko [11 hours ago]
Думаю, редактирование вообще не имплементить. Там же у нас отдельная кнопка)


dustnfox [11 hours ago]
Ну так да. Вот я и понять не могу, к чему это было написано? То ли, что вообще не нужно update делать на еду пока, то ли что-то другое.  Просто дальше в задании про фильтр и enable юзеров. Про update ни слова. Нужна его реализация через AJAX или нет, так и не понял.


Oleksii Leshchenko [11 hours ago]
скорее всего не надо трогать вообще


dustnfox [11 hours ago]
@Oleksii Leshchenko ок. Спасибо!


dmitry_ov [Yesterday at 1:51 PM]
in #hw8
Коллеги, подскажите как проект запустить:
Выполняю в maven cargo:run
Ожидаю что соберется war файл и запустится в tomcat
Вместо этого вижу сообщение от cargo-maven2-plugin такого содержания:
Failed to find file […/topjava/target/topjava.war]

т.е. war файл не был создан
Что я делаю не так ? (edited)


3 replies
Oleksii Leshchenko [11 hours ago]
попробуй сделать clean и пересобрать проект


dmitry_ov [11 hours ago]
Сделал  clean,  compile,  package. war появился !
Спасибо (edited)


dustnfox [11 hours ago]
В любой непонятной ситуации делайте mvn:clean :grin:


Slav [3:21 PM]
Друзья, при переходе на страницу users получаю следующую ошибку:
Message javax.servlet.ServletException: javax.servlet.jsp.JspTagException: No message found under code 'common.add' for locale 'ru'.

Почему не находит 'common.add' для кнопки? 
К статье, 'common.select' находит.


poleg [Yesterday at 5:41 PM]
in #hw8
8_7_add_security.mp4 8:45 - так почему юзера-то пропустил? Не должен ведь.


1 reply
realcorwin [1 hour ago]
Рискну предположить, по этой причине: путь в intercept-url должен быть полный: pattern="/rest/admin/**"


V-E-S-T [7:24 PM]
спасибо всем кто отписал мнения.


Ma3stro [Yesterday at 10:52 AM]
in #hw8
почему при удалении юзера (или любых других действий) у нас именно на ajax контроллер прилетает, где мы эт указали? (edited)


2 replies
Aleksei Kirillov [1 day ago]
Посмотри константу в userDatatables.js


Ma3stro [1 day ago]
Да, уже по-тихоньку разбираюсь:)


Oleksii Leshchenko [5:43 PM]
uploaded and commented on this image: image.png 

Если уменьшить окно браузера, то разметка немного слетает. Видно, если вся таблица не умещается и прокрутить прокрутку вправа... 
При полноэкранном режиме такого нет.

Yevhen Maksymovych [6:07 PM]
странно
у меня не слетает

Yevhen Maksymovych [6:08 PM]
uploaded this image: image.png 


Yevhen Maksymovych [6:08 PM]
ну только спаны с инпутфилдами разъезжаются в отдельные строки

Yevhen Maksymovych [6:08 PM]
uploaded this image: image.png 


Oleksii Leshchenko [6:13 PM]
@Yevhen Maksymovych А на странице Пользовтели?

Yevhen Maksymovych [6:25 PM]
тоже норм всё


Yevhen Maksymovych [Yesterday at 6:57 PM]
in #hw8
а зачем мы в модальной форме на спанах с иконками дополнительно указываем
```aria-hidden="true"```


3 replies
Grigory Kislin [23 hours ago]
можно убрать, роли не играет. погугли, если интересно (edited)


Yevhen Maksymovych [17 hours ago]
да я погуглил, так понял, что это accessible-опция для всяких скрин-ридеров, что элемент при чтении экрана не произносится. потому и удивился, почему мы принудительно его указали :slightly_smiling_face:


Grigory Kislin [7 hours ago]
во всех примерах обычно с ним


Yevhen Maksymovych [6:57 PM]
?

Oleksii Leshchenko [7:16 PM]
У меня при ajax-запросе на добавление еды вылетает ошибка *HTTP Status 415 Unsupported Media Type* если метод в контроллере определен так:
`@PostMapping`
   `public void createWithLocation(@RequestBody Meal meal) {`
А если так, то все работает:
   `@PostMapping`
   `public void createWithLocation(@RequestParam("id") Integer id,`
                                  `@RequestParam("dateTime") @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME) LocalDateTime dateTime,`
                                  `@RequestParam("description") String description,`
                                  `@RequestParam("calories") Integer calories ) {`
При этом без @DateTimeFormat не работат о ошибка 400

Yevhen Maksymovych [7:21 PM]
так и должно быть
мы же отключили стандартные форматтеры
а собственные добавили только отдельно на локалдейт и локалтайм
так что надо либо добавлять свой на локалдэйттайм, либо указывать через @DateTimeFormat что мы пользуем стандартный

Yevhen Maksymovych [7:47 PM]
а вот так работать и не будет
````@PostMapping`
   `public void createWithLocation(@RequestBody Meal meal) {```


Yevhen Maksymovych [Yesterday at 7:49 PM]
in #hw8
насколько я понимаю, чтобы корректно сериализовать форму в json-объект надо ещё подкрутить руками


2 replies
Grigory Kislin [23 hours ago]
а зачем форму в json передавать?


Yevhen Maksymovych [17 hours ago]
там Алексей сверху хотел из RequestBody получить целый Meal, в то вермя как мы отправляли через ajax сериализованную форму, я к тому написал, что можно собрать данные формы в Meal json и передать целиком, но придётся делать это руками


Yevhen Maksymovych [8:13 PM]
https://stackoverflow.com/questions/11338774/serialize-form-data-to-json
stackoverflow.com
Serialize form data to JSON
I want to do some pre-server-validation of a form in a Backbone.js model. To do this I need to get the user input from a form into usable data. I found three methods to do this: var input = $("#i...

Oleksii Leshchenko [9:12 PM]
Интересно, Datatable js локализована?

Yevhen Maksymovych [9:25 PM]
можешь сам локализовать
https://datatables.net/reference/option/language

Yevhen Maksymovych [11:49 AM]
кстати, локализуется довольно просто: качаешь нужный лангпак с сайта, кладёшь его к ресурсам в папку, а затем проверяешь navigator.language и подставляешь нужный пак в опции datatables

roma [8:55 PM]
Друзья пару вопросов есть )
1) данные в модальном окне добавляются все гуд - а аякс не српабатывает не понимаю почему - делал все как в юзерах было... Если обновить страницу - то новые данные отображаются
2) с DELETE тажа фигня
```var ajaxMealUrl = "ajax/meals/";
var mealDatatableApi;

// $(document).ready(function () {
$(function () {
    mealDatatableApi = $("#mealdatatable").DataTable({
        "paging": false,
        "info": true,
        "columns": [
            {
                "data": "date_time"
            },
            {
                "data": "description"
            },
            {
                "data": "calories"
            },
            {
                "defaultContent": "Edit",
                "orderable": false
            },
            {
                "defaultContent": "Delete",
                "orderable": false
            }
        ],
        "order": [
            [
                0,
                "desc"
            ]
        ]
    });
    makeEditableMeals();
});```
и фрагмент второго файла
```function deleteRow(id) {
    $.ajax({
        url: ajaxMealUrl + id,
        type: "DELETE",
        success: function () {
            updateMealTable();
            successNoty("Deleted");
        }
    });
}

function updateMealTable() {
    $.get(ajaxMealUrl, function (data) {
        mealDatatableApi.clear().rows.add(data).draw();
    });
}

function saveMeal() {
    var form = $("#detailsMealForm");
    $.ajax({
        type: "POST",
        url: ajaxMealUrl,
        data: form.serialize(),
        success: function () {
            $("#editMealRow").modal("hide");
            updateMealTable();
            successNoty("Saved");
        }
    });
}```


Yevhen Maksymovych [2 hours ago]
покажи гит


Yevhen Maksymovych [2 hours ago]
судя по тому, что данные уходят в БД, но не обновляются на форме, одно из двух: либо сервер не присылает ответ, либо jq некорректно его обрабатывает


Yevhen Maksymovych [2 hours ago]
надо смотреть, что уходит на сервер, и что оттуда приходит. или бряками в js, или инспектором в браузере


Grigory Kislin [1 hour ago]
вкладка Network в браузере- это №1 что надо смотреть


realcorwin [10:07 PM]
@roma попробуй, может, так:

function updateTable() {
   $.get(ajaxUrl, function (data) {
       datatableApi.fnClearTable();
       $.each(data, function (key, item) {
           datatableApi.fnAddData(item);
       });
       datatableApi.fnDraw();
   });

Ma3stro [10:46 PM]
Смотреть скрипт в демо или полностью делать самому? (edited)

Будет ли "честно" сие?
