Dmitrii Kurilchik [12:40 AM]
joined #hw1 along with 2 others.

Grigory Kislin [3:20 AM]
set the channel topic: https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson01.md

Grigory Kislin [3:23 AM]
Занятие 1: https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson01.md
Днем вышлю письмо (продублирую ссылку на занятие) (edited)

Tanya [3:25 AM]
joined #hw1 along with 16 others.

AntonY [6:27 AM]
@Grigory Kislin спасибо. Курс действительно очень интенсивный. Я еще не успел закрыть 100500 вкладок с урока HW0, а тут еще больше :slightly_smiling_face:

Vladimir Glinskikh [7:15 AM]
@AntonY Толи еще будет, ой ёёй. :slightly_smiling_face:

Tamerlan [9:58 AM]
Добрый день! Вебинар уже прошел?

vch [9:59 AM]
@Tamerlan вебинаров не будет. Есть заранее записанные видео, которые можно смотреть в любое время.

Tamerlan [10:00 AM]
@vch Спасибо! А где посмотреть можно будет подскажите

vch [10:00 AM]
см. https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson01.md (edited)

Tamerlan [10:01 AM]
Спасибо!


Andrey Fedkin [9:00 PM]
uploaded and commented on this image: error1.png 

После патча 1_0_fix возникает такая ошибка. Что делать - менять вручную или в дальнейшем это будет изменено с помощью остальных патчей?

Andrey Fedkin [9:24 PM]
и еще вопрос по поводу коммитов - делать коммит после каждого патча или после всех патчей ?

dyakoven [9:34 PM]
коммитить желательно после каждого патча, так удобнее откатывать при необходимости. пушить можешь уже все вместе

Mikhail Makar [9:51 PM]
Кстати, у всех получилось в Tomcat добавить строчку:
<user username="tomcat" password="tomcat" roles="tomcat,manager-gui,admin-gui"/>
У меня вот не даёт настройки поменять?
Всё, разобрался!

Mikhail Makar [11:14 PM]
Если у кого будет проблема с запуском Tomcat из консоли, ошибка типа:
"Neither the JAVA_HOME nor the JRE_HOME environment variable is defined
At least one of these environment variable is needed to run this program"

То вот годная статейка, в которой рассказывают как победить её:
http://thetekst.blogspot.ru/2012/02/tomcat-windows-x64.html
thetekst.blogspot.ru
Устанавливаем Tomcat для Windows x64
Скачиваем Tomcat разархивируем его на c:\Program Files\apache-tomcat-7.0.25\ Если запустить командную строку ( cmd ) и написать там: c...
http://1.bp.blogspot.com/-3w4X78RWSOI/TzUDtVMrifI/AAAAAAAAAkc/nGJrXFQKP9k/w1200-h630-p-k-no-nu/10%252C02%252C12%252815-17-52%2529.png

aleksey [11:31 PM]
Почему хотя jsp и являются по сути сервлетом, они никак не конфигурируются в web.xml? и вообще нигде никак не описываются, просто происходит редирект и все. В спринге же в сервлет диспатчере конфигурация происходит в явном виде.

Edgar Zed [13 hours ago]
JSP задумывались только как view и никакой особой бизнес-логики в себе не должны содержать, но в web.xml инит-параметры им можно дать
```<servlet>
  <servlet-name>init</servlet-name>
  <jsp-file>/init.jsp</jsp-file>
  <init-param>
      <param-name>test</param-name>
      <param-value>me</param-value>
  </init-param>
</servlet>```
и потом достать из pageContext например (edited)


Mikhail Makar [12:13 AM]
Кстати, артифакты нужно коммитить, или мгнорировать их?
В Патче 1.4 появляется

Dmitry Makarov [12:31 AM]
ненужно

Mikhail Makar [12:33 AM]
То есть коммитить нужно именно файлы, которые мы в дальнейшем будем пушить, так?

Dmitry Makarov [12:48 AM]
да

saudabaew [5:27 AM]
у кого нибудь есть проблемы с записью в лог-файл? у меня на консоль выводит, а в файл не пишет.

Dmitry Makarov [5:43 AM]
переменную окружения объявил? ребутнулся?

saudabaew [6:07 AM]
ага
Блин. Сейчас пытаюсь установить grails, там тоже надо добавлять переменные среды. Но тоже не работает, хотя вроде ничего сложного нет. Может что то с виндой...
Перезагрузил винду, grails заработал. Щас проверю логи в проекте

saudabaew [6:16 AM]
о, в лог-файл тоже начал писать. эх, Билл)

pro [6:22 AM]
@Mikhail Makar переменные аля_HOME всегда желательно держать во внимании, у меня, бывало, прописанный в интеллидж сервер (в edit configurations) игнорировался, а вместо него стартовал тот, на который указывала переменная сервер_HOME, у которого в каталоге "деплой" находился артефакт более ранней версии того самого приложения, которое я правил, и я очень удивлялся, почему правки не срабатывают)

Jury Mironov [10:49 AM]
Патч 1_3_HW0_optional2 не накатывается. Я его после fix патча применяю. Вылезает разрешение ошибок, как сказать ему что запихни уже весь код из патча и успокойся? После применения не меняется код. Или надо после  патчей stream и cycle? (edited)

Katherine [6 hours ago]
Откати ветку master так, чтобы в ней был только один твой коммит - Prepare to HW0. Патчи надо применять в master. А твой код остается рядом в отдельных ветках.


Katherine [6 hours ago]
А еще лучше - откати ее до самого начала и накатывай патчи, начиная с нулевого. И следи за тем, чтобы при применении патча стояли галочки на всех файлах, в которых патч делает изменения. И при коммите тоже за галками следи.


Jury Mironov [6 hours ago]
я так и откатил, код в патче optinal2 отличается от кода чистого мастера, как я понял


Jury Mironov [6 hours ago]
все патчи кроме него нормально применяются


Katherine [6 hours ago]
Последовательно применяй. 1_0 - коммит в master, 1_1 - коммит в master


Aliaksei Zayats [5 hours ago]
именно последовательно, как как один патч зависит от предыдущего.. сам вчера промучался

Grigory Kislin [42 minutes ago]
https://github.com/JavaOPs/topjava/wiki/git#%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-%D0%BF%D0%B0%D1%82%D1%87%D0%B0%D0%BC%D0%B8-%D0%BD%D0%B0-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B5
GitHub
JavaOPs/topjava
topjava - Java Enterprise: Maven/ Spring/ Security/ JPA(Hibernate)/ REST(Jackson)/ Bootstrap(CSS)/ jQuery


Rostyslav [11:20 AM]
Коммит  после патча именовать как и сам патч для удобства чтения, или банально HW0? Как кто делает?

Katherine [5 hours ago]
Именовать для удобства чтения.



Grigory Kislin [41 minutes ago]
я так делаю:) только не коммит именовать, а комментарий к коммиту (edited)


dmitry_ov [12:49 PM]
Patch не накатывается

https://github.com/JavaOPs/topjava/wiki/Git#patch-%D0%BD%D0%B5-%D0%BD%D0%B0%D0%BA%D0%B0%D1%82%D1%8B%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F-%D0%BF%D1%80%D0%B5%D0%B4%D0%BB%D0%B0%D0%B3%D0%B0%D0%B5%D1%82-merge (edited)
Jury Mironov
Патч 1_3_HW0_optional2 не накатывается. Я его после fix патча применяю. Вылезает разрешение ошибок, как сказать ему что запихни уже весь код из патча и успокойся? После применения не меняется код. Или надо после  патчей stream и cycle?
GitHub
JavaOPs/topjava
topjava - Java Enterprise: Maven/ Spring/ Security/ JPA(Hibernate)/ REST(Jackson)/ Bootstrap(CSS)/ jQuery

Pavel Zaitcev [12:56 PM]
Для удовлетворения требования 1.2.2 рекомендую посмотреть ссылку, данную там же, чуть ниже: "JSTL LocalDateTime format" https://stackoverflow.com/questions/35606551/jstl-localdatetime-format . Очень упрощает вывод LocalDateTime в нужном формате через JSTL.
stackoverflow.com
JSTL LocalDateTime format
I want to format my java 8 LocalDateTime object in "dd.MM.yyyy" pattern. Is there any library to format ? I tried code below but got convertion exception. <fmt:parseDate value="${date}" pattern...

Джони [3:26 PM]
uploaded and commented on this image: изображение.png 

Привет, коллеги) помогите разобраться с проблемкой:
накатывал патчи попорядку и после каждой накатки делал в GIT команду "git add .", а затем в idea делал комит. и всё вроде хорошо...
НО когда сделал push, на сайте в аккаунте гитхаба комиты не отобразились... подскажите в чём может быть проблема?

goodhoopoe [3:29 PM]
https://github.com/Zondr/topjava/commits/master
GitHub
Zondr/topjava
topjava - Java Enterprise: Maven/ Spring/ Security/ JPA(Hibernate)/ REST(Jackson)/ Bootstrap(CSS)/ jQuery

goodhoopoe [3:29 PM]
uploaded this image: image.png 


goodhoopoe [3:29 PM]
хэши коммитов совпадают

saudabaew [3:36 PM]
commented on Джони’s file изображение.png
На самом гитхабе в ветке мастер смотрел?

Джони [3:44 PM]
@goodhoopoe @saudabaew сорян, я на гитхабе был на странице вводного задания, вот и не обновлялось)))))

goodhoopoe [3:44 PM]
бгг
бывает )

Джони [3:45 PM]
надо проветриться..)


Andrii [6:26 PM]
Подскажите, не пойму, сделал apply все патчи урока Lesson01 в master, теперь у меня дублируется метод getFilteredWithExceeded, только под разной реализацией. Мне нужно было apply сделать, только одной реализации или все верно и можно commit/push ?

Ma3stro [6:32 PM]
Всё правильно, пока у нас несколько реализаций этого метода

roma [6:35 PM]
народ реализация getMealWithExceeded в один проход не доходит только до моего маленького мозга (особенно рекурсия)?

Sergey Mitrichev [12 hours ago]
просто плюсану, чтобы тебе не было одиноко :slightly_smiling_face:


Sergey Mitrichev [12 hours ago]
что, кстати, больше непонятно? рекурсия или один проход?


roma [5 hours ago]
Просто с ходу не понятно ни то ни другое - вчера поковырялся немного - что то понял ) - в рекурсию не лазал - не люблю я ее


Aleksey Vra [7:19 PM]
как для линукса правильно добавить переменную окружения?
добавил в bashrc строчку TOPJAVA_ROOT="/media/vra/topjava"
и в консоли по команде "exploded" переменная отоброжается, но в проекте логи только в консоль idea идут, не пойму в чем проблема

aleksey [19 hours ago]
Если не ошибаюсь то в ~/.profile нужно определять переменные окружения. Тогда они будут видны не только в терминале


Aleksey Vra [18 hours ago]
спасибо, помогло:slightly_smiling_face:


qf05 [8:58 PM]
пока вместо DateFormatter использовал fn:replace вывод мне нравится)))
Но сейчас буду переделывать...
Подскажите, а что вообще означает Optional в домашнем задании, это просто типа часть вторая усложненная или это дополнительное задание?

Dmitry Neustupov [9:07 PM]
@qf05 дополнительная, усложнённая, вторая часть )

Kirilo [1:52 AM]
а на сервлеты ссылочка битая... Совсем не так, как в видео...
https://github.com/JavaOPs/basejava/blob/master/lesson/lesson15.md#%D0%A1%D0%B5%D1%80%D0%B2%D0%BB%D0%B5%D1%82%D1%8B
GitHub
JavaOPs/basejava
Contribute to basejava development by creating an account on GitHub.

Aleksey Vra [3:59 AM]
@Kirilo на этом сайте все ссылки переехали https://devcolibri.com/%d0%ba%d0%b0%d0%ba-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d1%82%d1%8c-servlet-%d0%bf%d0%be%d0%bb%d0%bd%d0%be%d0%b5-%d1%80%d1%83%d0%ba%d0%be%d0%b2%d0%be%d0%b4%d1%81%d1%82%d0%b2%d0%be/ (edited)

Andrew [5:56 AM]
ребята кто как реализует подсветку текста  "красный-зеленый" в таблице ?

Andrew [6:24 AM]
может есть варианты кроме c:if (jstl).

Aleksey Vra [7 hours ago]
я сделал через тернарный оператор, цвет задавал в теге <tr>
там где цвет указать надо написал тернарный jstl



Andrew [7 hours ago]
@Aleksey Vra да так поменьше дублирующего кода)


roma [9:48 AM]
Есть кто живой?

Dmitry Neustupov [10:09 AM]
@roma есть

pro [10:09 AM]
что надо

Andrew [10:25 AM]
@pro хех, четко и по делу))

Fedor [10:26 AM]
Привет! Я правильно понял, ветку HW1 делаем из ветки master после накатки всех патчей?

Dmitry Makarov [3 hours ago]
Да. На мастер накатываются патчи, потом создается ветка HW1. (edited)


Andrew [10:28 AM]
угу

Aleksei Kirillov [10:36 AM]
Привет! А кто как понимает пункт "Сделать отображения списка еды в JSP, цвет записи в таблице зависит от параметра exceed (красный/зеленый)."? 
Параметр exceed - это поле в MealWithExceed?
Где тогда задается порог caloriesPerDay для getFilteredWithExceeded?

Dmitry Neustupov [3 hours ago]
Параметр exceed - это поле в MealWithExceed? - Да


Andrew [3 hours ago]
читай выше, это уже обсуждали


Aleksei Kirillov [3 hours ago]
в ветке hw1? Что-то не найду


Andrew [3 hours ago]
Я уже задавал вопрос по поводу раскраски текста в таблице один человек ответил


Andrew [3 hours ago]
читай внимательно


Aleksei Kirillov [3 hours ago]
про тернарый оператор я видел. А где задается порог для определения красный-зеленый?


Andrew [3 hours ago]
Создай клас положи туда list<MealWithExceed> а как ты его инициализируешь какая разница...


Andrew [3 hours ago]
мы пока без БД работаем


Dmitry Neustupov [3 hours ago]
Где тогда задается порог caloriesPerDay для getFilteredWithExceeded? - На данный момент, там, где удобно. Можно вручную каждый раз прописывать, можно переменную завести и к ней обращаться.


Aleksei Kirillov [3 hours ago]
ок, спасибо!


Mikhail Makar [10:45 AM]
Ребят, есть такие кто уже дз осилил?

Pavel Zaitcev [11 hours ago]
Скинул в личку

Ilya [11:17 AM]
только первую часть, без опшинал

Vladimir [11:49 AM]
всем привет! кажись я что-то пропустил. дайте пожалуйста ссылку на видео вступительного занятия, везде говорится про это видео, но ссылки на видео я  в упор не вижу

roma [12:15 PM]
@Vladimir зайди в hw0 (в слаке) - там ссылка сверху есть ну или https://github.com/JavaOPs/topjava
GitHub
JavaOPs/topjava
topjava - Java Enterprise: Maven/ Spring/ Security/ JPA(Hibernate)/ REST(Jackson)/ Bootstrap(CSS)/ jQuery

Grigory Kislin [1:01 PM]
ссылки на devcolibri  в уроке поправил
https://devcolibri.com/jstl-для-написания-jsp-страниц/

Jury Mironov [1:51 PM]
В материале по первому заданию есть объяснение, как запилить сервлет с выводом листа? Я что-то не нашел. Я все делал через спинг и в сервлетах я 0 (edited)


Vladimir [2:18 PM]
спасибо!
roma
@Vladimir зайди в hw0 (в слаке) - там ссылка сверху есть ну или https://github.com/JavaOPs/topjava

roma [3:03 PM]
а не читерство будет менять цвета церез CSS:
```<tr id="${meals.isExceed()}">```
и через селекторы их фигачить
```#true{
    color: red;
}
#false{
    color: green;
}```
    ??? (edited)

Ma3stro [3:36 PM]
Это один из вариантов. Спасибо, что указал такой способ! (edited)

roma [3:39 PM]
Ок а для удаления Т из времени можо дополнить MealsWithExceeded - еще одним геттером?

Ma3stro [3:39 PM]
Я форматировал прямо в jsp
taglib fmt
Как корректно реализовать счетчик?
Я думал сделать так: добавить в Meal и MealWithExceed static AtomicInteger id и в конструкторе инкрементировать, но каждый раз при обновлении страницы meals счетчик увеличивается, и мало того у каждой записи он одинаковый

roma [3:44 PM]
я до круда не добрался

Valery [4:32 PM]
@Ma3stro, не делай его статическим.

Anton [4:34 PM]
За optional завтра уже буду садиться..... целый день страница упорно отказывалась показывать список.... оказалось забыл гетеры добавить))))

Anton Kiselev [4:45 PM]
Подскажите, список List<MealWithExceed> для отображения, мы получаем на выходе getFilteredWithExceeded()? Но если нам не нужна фильтрация по времени... надо List<Meal> через другой метод пропускать? Чет запутался


Evgeniy [4:48 PM]
<td><span style="${meal.isExceed() ? "color: red" : "color: green"}" ><c:out value="${meal.isExceed()}"/></span></td>
у меня наиболее компактно получилось так

Valery [4:48 PM]
@Anton Kiselev, в getFilteredWithExceeded() можно передать такие параметры, чтобы все значения List<Meal> попали в диапазон.
>Но если нам не нужна фильтрация по времени...
(edited)

Anton Kiselev [4:51 PM]
@Valery спасибо, понял

uraplayer [6:29 PM]
Не могу понять как список с едой прикрутить к meals.jsp
и вот этот пункт можете, пожалуйста пояснить? 1.2.4 Вариант реализации:
из сервлета преобразуете еду в List<MealWithExceeded>; (edited)

Anton [6:35 PM]
создаем метод который преобразует список еды в список с EXCEED только без учета времени(подсказка закоментирована), из сервлета обращаемся к этому методу и форвард на страницу meal.jsp

pro [6:39 PM]
@uraplayer "из сервлета" - фраза предполагает, что ты абстрагируешься, и взглянешь на ситуацию, находясь как бы в сервлете; преобразуем, находясь в сервлете, список, который в сервлет поступает при базовом решении задачи - из MealsUtil, при optional - из бд, и отправляем его на вьюшку

Jury Mironov [6:53 PM]
Кто-нибудь разобрался как отформатировать вывод даты и времени в jsp?

uraplayer [7:13 PM]
uploaded and commented on this image: 2018-03-03_20-08-33.png 

@pro чето туплю, не догоняю, не хватает знаний видимо - всетаки плаваю в этих темах еще. Когда есть примеры, по аналогии проще сделать. Сейчас имею вот что (скриншот) Нужно будет добавить логику по цветам, и убрать Т из времени. Не понял где захардкодить список - повторил его в mealServlet и передал в meals.jsp. Изначально этот список у нас в задается в методе main, класса MealsUtil

Jury Mironov [7:23 PM]
я красил через css, а по датам так же вопрос открыт (edited)

Andrew [7:28 PM]
по поводу убрать  "T" тут наверное переопределить метод toString() потому что оно там сидит
@Override
   public String toString() {
       return date.toString() + 'T' + time.toString();
   }
создать обертку

vch [7:31 PM]
@Andrew Через рефлексию подменить метод у LocalDateTime? (edited)

Andrew [7:33 PM]
@vch не понял

dustnfox [7:35 PM]
В материалах урока есть ссылка по поводу форматирования LocalDateTime внутри JSTL. https://stackoverflow.com/questions/35606551/jstl-localdatetime-format
Если в двух словах: вот уже 14 лет JSTL не может научиться нормально управляться с LocalDateTime и приходиться заниматься всякими извращениями. В частности писать свои EL функции. По факту оказывается не так сложно. Там все описано.
stackoverflow.com
JSTL LocalDateTime format
I want to format my java 8 LocalDateTime object in "dd.MM.yyyy" pattern. Is there any library to format ? I tried code below but got convertion exception. <fmt:parseDate value="${date}" pattern...

Jury Mironov [19 hours ago]
Читал, но так и не получилось реализовать


dustnfox [19 hours ago]
Да там вроде все достаточно подробно описано. Создаешь свою библиотеку тэгов для JSTL. По факту в данном случае библиотека из пары функций. Создается файл TLD кладется в WEB-INF чтобы с импортом в JSP проблем потом не было. В этом TLD описывается какие  методы каких классов на какие тэги будут маппиться. А в своих JSP уже объявляешь этот TLD и используешь.


Jury Mironov [19 hours ago]
У меня какие-то ошибки были, надо еще раз попробовать


dustnfox [19 hours ago]
Само собой, что с первого раза редко чего получается :slightly_smiling_face: Только с помощью проб и ошибок.


pro [7:36 PM]
@uraplayer я просто вырезал список из метода main класса MealsUtil и вынес его в класс, добавив перед ним static

Andrew [7:37 PM]
@dustnfox спс

dustnfox [7:39 PM]
@Andrew не за что

Dmitry Neustupov [7:39 PM]
javatime никто в jsp не использовал?
там форматирование по паттерну есть

roma [7:39 PM]
@vch скучал по твоему сарказму ))))

vch [7:46 PM]
@roma Это не сарказм...
Буквально недавно пришлось применить грязный хак, чтобы использовать апачевскую библиотеку FileUpload, но подменить в ней 1 класс (т.к. надо было обработать входящие http-запросы, не соответствующие RFC).

ilya t. [7:54 PM]
@Dmitry Neustupov я пытался но почему то эксепшн ловил, забил и сделал через либу фмт, так проще
по поводу смены цвета записи - так нужно менять background записи или именно цвет шрифта?)) если бэкграунд то так даже короче) (edited)
хотя это уже частности...

Mikhail Makar [10:02 PM]
Может кто подсказать как в сервлете получить наш список или статейку подкинуть для прочтения?
А то уже гугл терроризирую несколько часов)

mrLanu [10:04 PM]
Может интегрировать объект класса со списком в сервлет, и использовать его методы
Как то типа так private UserMeal userMeal;  и потом метод вызвать, getList, не так ?

Dmitry Neustupov [10:11 PM]
@Mikhail Makar 1.2.1 Список еды захардкодить (те проинициализировать в коде, желательно чтобы в проекте инициализация была только в одном месте)

uraplayer [10:12 PM]
uploaded and commented on this image: 2018-03-03_23-10-27.png 

Подскажите в чем ошибка? когда выводил обычный список Meal все было ок, когда заменил его на mealsWithExceed выдает ошибку, что не так?

Andrii Hreshchik [10:21 PM]
может из-за геттеров? их нет в mealsWithExceed (edited)

uraplayer [10:24 PM]
@Andrii Hreshchik а как тогда выводить?

Andrii Hreshchik [10:27 PM]
попробуй геттеры добавить в mealsWithExceed

uraplayer [10:30 PM]
@Andrii Hreshchik блин действительно так прокатило
а разве можно менять класс этот?

Andrii Hreshchik [10:32 PM]
в самом начале говорили, что менять код можно)

uraplayer [10:34 PM]
@Andrii Hreshchik спс

dmitry_ov [11:07 PM]
Версия Tomcat имеет  значение ? 
Можно поставить 9, а не 8 как в уроке ?

uraplayer [11:08 PM]
У меня 9 все работает

Arseniit [11:08 PM]
6й пункт
Нам нужна 8-я версия Tomcat (например последняя 8.5.28)
Устанавливать Tomcat лучше простым скачиванием архива xxx.zip и копированием из него в каталог без пробелов и русских букв (пример С:\java\apache-tomcat-8.5.28). Не используйте Tomcat 8.5.13 и 9.0.0.M19 IDEA из-за бага Tomcat

realcorwin [11:09 PM]
у меня тоже 9. Но не 9.0.0., а 9.1

dmitry_ov [11:09 PM]
у меня 9,0,5

realcorwin [11:09 PM]
ставил ещё на JR и когда CRUD делал. так что теперь, сносить? :slightly_smiling_face: обидно

dmitry_ov [11:10 PM]
ладно откачу на версию  ниже
нечего рисковать

realcorwin [11:10 PM]
9.0.1 у меня

Arseniit [11:11 PM]
интересно. у меня уже стоит 9. попробую на девятке тогда

uraplayer [11:27 PM]
uploaded this image: Наконец-то, без помощи не решил бы с цветами 


uraplayer [11:30 PM]
Можете пояснить в чем разница между  <td>${meal.description}</td> и <td><c:out value="${meal.description}" /><td>

dustnfox [11:50 PM]
Оказывается первый вариант уязвим. https://stackoverflow.com/questions/291031/jsp-jstls-cout-tag
uraplayer
Можете пояснить в чем разница между  <td>${meal.description}</td> и <td><c:out value="${meal.description}" /><td>
stackoverflow.com
JSP : JSTL's  tag
Writing a JSP page, what exactly does the <c:out> do? I've noticed that the following both has the same result: <p>The person's name is <c:out value="${person.name}" /></p>...

Aleksey Vra [12:10 AM]
что то сделал и теперь
http://localhost:8888/topjava/meals без .jsp - не загружает jsp пока сам руками не пропишу
http://localhost:8888/topjava/users.jsp - а здесь все норм.. 
сервелеты UserServlet и MealsServlet идентичны, все работало и через request.getRequestDispatcher и через response.sendRedirect

pro [12:10 AM]
мавен забазарил, что последняя версия jstl (1.2) вышла в далеком мае 2015-го.. а последняя JSP (2.2.1-b03)  - в январе 2011-го, и после этого более не обновлялись. Вопрос: почему все на них подзабили, а мы еще нет

realcorwin [12:17 AM]
да, jsp уже давно никто не пользуется

mrLanu [12:20 AM]
Немешало бы договориться не обсуждать, что используют, а что нет.... вы когда до роботы доберетесь, там врятли все на 5ом спринге будет. Так что тейкИтИзи

aleksey [12:21 AM]
В 2011 году разработчики создали JSP (2.2.1-b03), это концентрированное мастерство, недостижимый идеал, чудо из чудес, как катана непревзойденного мастера режущая веб пространство, альфа и омега, инь и янь, начало и конец... Ее нельзя улучшить, каждый байтик кода в феншуй гармонии с остальными и природой, сдвинешь один один и гармония нарушится. Сейчас JSP (2.2.1-b03) находится в Париже в палате мер и весов, а все разработчики сами себя ослепили и ушли в отшельники, понимая что не создадут в жизни ничего лучшего.

This message was deleted.

pro [16 hours ago]
я бы ему простил такую лажу только за то, что 2002-й для меня очень знаменательный год


pro [16 hours ago]
главная цель такой компании - застраховать побольше народу, а не какие-то там дженерики


pro [12:55 AM]
@EJB не хочет инжектиться в сервлет, выстреливает NullPointerException при вызове списка на вьюшке.. прийдется все таки делать обратно все элементы класса MealsUtil статическими
или, может, у кого есть соображения по этому поводу?
попробую на ентерпрайз сервер задеплоить

Aleksey Vra [12:59 AM]
проблему удалось решить переименовав meals.jsp -> mealsList.jsp
что за глюк не понимаю..
может кто сталкивался?
Aleksey Vra
что то сделал и теперь
http://localhost:8888/topjava/meals без .jsp - не загружает jsp пока сам руками не пропишу
http://localhost:8888/topjava/users.jsp - а здесь все норм.. 
сервелеты UserServlet и MealsServlet идентичны, все работало и через request.getRequestDispatcher и через response.sendRedirect

pro [1:07 AM]
@Aleksey Vra скорее всего, надо искать в web.xml.. сейчас подумаю что это может быть, помню, где то встречался с подобным вопросом, только при работе с JSF, там все решалось через редактирование application.properties

Aleksey Vra [1:12 AM]
@pro перепроверял все имена, больше часа сидел, сейчас попробую обратно переименовать в meals.jsp

mrLanu [1:20 AM]
В веб.хмл помоему, должен быть viewResolver определён с суфиксом .jsp

mrLanu [1:31 AM]
А не, это для спринга

pro [1:32 AM]
@Aleksey Vra а какой ексепшн в браузере показывает

Aleksey Vra [1:32 AM]
UserServlet работал же, а сейчас оба сервелета работают как надо..
если использовать getRequestDispatcher, то без .jsp в адресной строке, но jsp загружается так же, а у меня не загружалось хоть так, хоть эдак..
вот сейчас вернул все на место, вроде работает.. возможно где то в названии переменной ошибся, хотя многократно перепроверял..
@pro ошибок не было, оставался на странице index.html, менялся только адрес http://localhost:8888/topjava/meals

mrLanu [1:34 AM]
Это на сервлет запрос
Он страницу не отдавал

Aleksey Vra [1:35 AM]
вот именно, а почему не отдавал ))

mrLanu [1:35 AM]
Сервлет нужно смотреть
Опячятка

pro [1:36 AM]
тогда дело в сервлете таки

Aleksey Vra [1:38 AM]
так я потом удалил все, сделал идентично с UserServlet )
response.sendRedirect("users.jsp");
response.sendRedirect("meals.jsp");
вот и вся разница между ними..
в общем всем спасибо, на данный момент все работает, если потворится - отпишусь )

pro [1:41 AM]
прикольная штука - маленький проектик, типа этого, который тут нам зарядили, - можно жестко играться, рефакторить вдоль и поперек, так  как нечему ломаться, сразу можно вручную туда-сюда все переделывать, и не страшно что все рухнет))

mrLanu [1:43 AM]
Ну если все коммитить на гит, то тоже все можно ломать спокойно

Pavel Zaitcev [2:02 AM]
Я использовал. https://github.com/sargue/java-time-jsptags здесь описание, как использовать кастомную библиотеку тэгов javatime.

Вывод состоит из двух частей:

1) парсим, используя паттерн с 'T'
2) форматируем и выводим без 'T'

Здесь готовое решение публиковать не буду, скинул в личку.
Dmitry Neustupov
javatime никто в jsp не использовал?
GitHub
sargue/java-time-jsptags
java-time-jsptags - JSP tag support for Java 8 java.time (JSR-310)

Anton Kiselev [8 hours ago]
Привет, можно тоже в личку парсер глянуть?


pro [8:51 AM]
никто не пробовал заинжектить CDI bean в JSP?

Dmitry Neustupov [8:52 AM]
@pro я не пробовал )

pro [8:55 AM]
я хотел сделать класс MealsUtil EJB-бином и заинжектить его в сервлет, все компилируется отлично, но когда из вьюшки в сервлет приходит запрос на данные из EJB, выбрасывает NullPointerException

vch [8:57 AM]
@pro а зачем тебе EJB, если чуть позже будем инжектить через Spring?

pro [8:58 AM]
думал убрать назойливые статики из MealsUtil за счет этого

Dmitry Neustupov [9:05 AM]
@pro что в них такого назойливого? )

vch [9:07 AM]
@pro лучше тогда Spring прикручивай, EJB вообще дальше не пригодится.
Но только - если всё остальное задание уже выполнил...

pro [9:09 AM]
@vch добро, наверное, таки спринг значит))
@Dmitry Neustupov у меня где то на подсознании заложено, что статиков надо поменьше,  не знаю с чем это связано, думаю что код становится более гибким, если в нем минимум статиков

Ma3stro [9:12 AM]
Теперь у меня все id'шники равны 1
Valery
@Ma3stro, не делай его статическим.

Ma3stro [9:18 AM]
Как сюда корректно вставить код?

vch [9:22 AM]
@Ma3stro Либо с 2 сторон тремя апострофами обрамить (который у буквы `ё`), либо слева поля ввода есть кнопка `+` и выбрать `Code or text snippet`. 
С другой стороны... Ты хочешь похвастаться кодом или обеспечить нам ночные кошмары? (edited)

Valery [9:27 AM]
@Ma3stro, тебе нужны две переменные. Одна статическая отвечает за инкремент при создании нового объекта класса, вторая содержит значение ID конкретного объекта.
Посмотри сюда еще - https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet()

Anton [9:32 AM]
Привет всем, а обязательно использовать базу postrageSql или можно My Sql обойтись ?

Ma3stro [9:44 AM]
@Valery благодарю за подсказку с двумя переменными, получилось:)

Dmitry Neustupov [9:48 AM]
@Anton В дальнейшем вся работа будет с Postgres и HSQLDB, теоретически, никто не запрещает пользоваться MySql )

vch [9:49 AM]
@Dmitry Neustupov А как же скрипты для создания базы? Думаю, их синтаксис должен немного отличаться для разных СУБД

Dmitry Neustupov [9:52 AM]
@vch отличается, но если человек знает синтаксис MySql, то подправить скрипты инициализации и популирования БД не составит труда.

Dmitry Makarov [9:57 AM]
в MySQL разве есть Sequence? уж больно много править придется (edited)

Anton Kiselev [10:38 AM]
Вопрос: сколько раз нужно прочитать optional, чтобы понять что от меня требуется?)

Dmitry Neustupov [11:04 AM]
@Anton Kiselev там же пример есть )

Anton Kiselev [5 hours ago]
@Dmitry Neustupov т.е HW0 - реализация одного метода, HW1 - реализовать CRUD с редактированием и удалением? К такому жизнь меня не готовила..


Dmitry Neustupov [5 hours ago]
@Anton Kiselev именно так )


vch [5 hours ago]
@Anton Kiselev а дальше будет гораздо хуже... HW1 можешь считать постепенной подготовкой перед HW2


Anton Kiselev [5 hours ago]
@vch просто я со многими вещами не знаком из того что требуется HW1. времени для освоения нужно больше чем прожженным. не думал что все так форсированно.. (edited)


realcorwin [4 hours ago]
@Anton Kiselev есть такая сказка - "Суп из топора" :slightly_smiling_face:. Спасает только Гугл. И Григорий по четвергам :slightly_smiling_face:.


vch [4 hours ago]
А у меня почему-то в голове крутится фраза из фильма - `Сначала будет немного больно. Потом станет много хуже.`


Anton Kiselev [4 hours ago]
@realcorwin у меня пока суп из того, что похуже топора получается)
знания структурировать надо, а с таким подходом вряд ли удастся.


Anton Kiselev [4 hours ago]
@vch спасибо, утешил


realcorwin [4 hours ago]
@Anton Kiselev ты не с JavaRush? CRUD не делал ещё?


realcorwin [4 hours ago]
@Anton Kiselev если дальше не продвигаешься, делаешь, как настоящий программист. ну или как студент консерватории ("вся музыка уже написана до нас, нам осталось только получить за неё деньги") :slightly_smiling_face:. гуглишь "topjava github hw01". там ищешь ветки "hw01" (не master; в решения Григория лезть не надо). смотришь, как разные ребята решали до тебя. сравниваешь. копируешь. разбираешься. делаешь по аналогии. меняешь код и смотришь, что изменилось в результате. читаешь теорию параллельно. врубаешься. (edited)


Anton Kiselev [4 hours ago]
@realcorwin делал, по принципу "не важен процесс, важен результат".  остались пробелы в той или иной части. 
а тут опять говорят "делай то же самое".


realcorwin [4 hours ago]
@Anton Kiselev тут не совсем то же самое. вряд ли ты через сервлеты делал. короче, действуй по плану, что я выше написал :slightly_smiling_face:.


vch [4 hours ago]
@realcorwin А вот это претендует на `вредный совет года`
Видимо ты даже не представляешь, какую жуть творит иногда народ. 
А чтобы отделить правильные решения от плохих надо хорошо разбираться в теме.
И мы возвращаемся на исходную точку...


Anton Kiselev [4 hours ago]
@realcorwin ок, понял, спасибо.
как раз по сервлетам. начал ковырять их(сознательно). первую часть ДЗ сделал - остался доволен. потом увидел optinal - загрустил)


realcorwin [4 hours ago]
@vch потому желательно просмотреть хотя бы пяток разных вариантов


Vladimir [12:01 PM]
всем привет! только закончил просмотр видео. Почитал ДЗ, есть нед чем потрудиться. Когда следующее занятие? сколько есть времени на решение...

Valery [12:13 PM]
расписание ищи здесь - https://github.com/JavaWebinar/topjava/blob/doc/README.md
GitHub
JavaWebinar/topjava
Contribute to topjava development by creating an account on GitHub.

Dmitry Neustupov [12:14 PM]
@Vladimir в четверг

Vladimir [12:33 PM]
спасибо

Dmitriy Kozin [1:38 PM]
Друзья, кто подскажет в чем разница директивы jsp:useBeans с указанием type и указанием class? Почему одна работает в одних случаях, другая в других?

pro [2:46 PM]
когда космическия корабли бороздят просторы нашего космоса, нам приходится писать кастомный тег чтоб парсить LocalDateTime..

Dmitriy Kozin [2:54 PM]
Я просто сделал статический DateTimeFormatter в MealWithExceed (DateTimeFormatter же вроде потокобезопасный) и метод, в котором скормил дату этому форматеру. Метод начинается с get.. , в JSP делаешь название этого метода как переменную..

aleksey [2:59 PM]
Правильней расположить этот метод в MealsUtil

Dmitriy Kozin [1 hour ago]
Как только написал эту мессагу - сам это понял. И перенес в ТаймУтилс.


pro [1 hour ago]
а я уже написал кастомный тег, лень переделывать


v.n [3:35 PM]
есть jsp библиотека для форматирования - java-time-jsptags

Grigory Kislin [3:47 PM]
> <tr id="${meals.isExceed()}">
@Roman по спецификации id в html должен быть уникальный... скорее читерство
но мысль интересная:) (edited)

Grigory Kislin [4:09 PM]
@pro @realcorwin
>  jsp уже давно никто не пользуется
2й вопрос в 
https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson01.md#-%D0%92%D0%B0%D1%88%D0%B8-%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81%D1%8B (edited)
GitHub
JavaWebinar/topjava
Contribute to topjava development by creating an account on GitHub.


pro [7:09 PM]
@Grigory Kislin я бы поверил в то что thymeleaf используется, развивается, но jsp... если бы он был живой, то его бы апгрейдили; вот уж семь лет прошло, а последняя бета версия так и зависла в воздухе (бета  - это, по видимому чтоб снять с себя ответственность перед людьми, которым приходится продолжать его использовать)

Grigory Kislin [7:12 PM]
@pro 1. я не говорю что JSP развивается 2. нет такой задачи заставить тебя мне поверить

pro [7:13 PM]
@Grigory Kislin сори, ничего личного, только факты
@Grigory Kislin хотел спросить, optional для урока HW01 должен производить изменения в БД, при вызове методов из вьюшки, или только считывать лист и отображать его?

mrLanu [7:16 PM]
Такая мысль.... jsp используют многие проекты и это факт и будут еще долго. Если для саморазвития то можно его выучить, а с другой стороны, если я не платил за ДЗ, кто мне запретит юзать в стажироаке таймлиф ?
Шансов найти работу в разы больше с жсп (edited)
Даже фримаркер не помешает... так что less talking more doing, guys
И еще вопрос в тему, а с Логгером это свеженький материал или уже как то проще его можно подтянуть себе в проекты ?

Евгений Глушков [7:24 PM]
@Grigory Kislin Григорий, добрый день. В предложенном решении HW0 через рекурсию не перепутан знак "<=" с ">"?

Dmitry Dimidyuk [7:48 PM]
Кто какие варианты решения проблемы многопоточности при хранении данных использует? Остановился перед выбором: использовать простой Arraylist + lock или Collections.synchronizedList?

aleksey [21 hours ago]
В мапу пихай а не в лист, так ближе к структуре бд ближе и меньше кода в Dao писать (edited)


pro [7:52 PM]
таки, наверное, последний вариант

Dmitry Dimidyuk [8:04 PM]
почему, если не секрет?)

pro [8:06 PM]
проще реализовать

v.chernyshoff [8:07 PM]
в современных проектах JSP не используется практически
mrLanu
Шансов найти работу в разы больше с жсп
бэк пишет серверную часть, фронт пишет клиентскую, обмен происходит через REST

mrLanu [8:09 PM]
А кто будет поддерживать не современные проекты ?

v.chernyshoff [8:09 PM]
во всяком случае, бэк вообще не соприкасается с клиентской частью
смотря какую его часть. клиентской частью занимается фронт
mrLanu
А кто будет поддерживать не современные проекты ?

mrLanu [8:10 PM]
@v.chernyshoff  ты тут преподавателем ?

vch [8:10 PM]
@v.chernyshoff мне кажется, ты рассматриваешь определенный тип проектов... Который не охватывает все потребности бизнеса.
И ты так и не сказал, что используют на фронте (edited)

v.chernyshoff [8:10 PM]
нет, я с 11 выпуска. а ты тут учеником?

mrLanu [8:11 PM]
Или историей успеха решил поделиться ?

v.chernyshoff [8:11 PM]
на фронте, те части, что я видел, используют JS
vch
@v.chernyshoff мне кажется, ты рассматриваешь определенный тип проектов... Который не охватает все потребности бизнеса.
И ты так и не сказал, что используют на фронте

Dmitry Neustupov [8:12 PM]
@Dmitry Dimidyuk не надо велосипед изобретать ) Есть же потоко-безопасные коллекции.

Dmitry Dimidyuk [21 hours ago]
Действительно, получше поискал, оказалось есть потоко-безопасная реализация листа, был уверен что ее нет, спасибо :))


v.chernyshoff [8:12 PM]
а что, похоже? если ты решил высказать своё мнение, то почему бы своё мнение не высказать мне?
mrLanu
Или историей успеха решил поделиться ?

mrLanu [8:13 PM]
Просто тут жсп и конец....

v.chernyshoff [8:13 PM]
мне кажется, Григорий учит JSP для того, чтобы ученики могли видеть результат, поскольку фронт-энд разработчики в проекте не участвуют

vch [8:15 PM]
@mrLanu На masterjava Thymleaf, если что. Но, мне кажется, они охватывают одинаковый класс проектов - обычные шаблонизаторы. Т.е. разницы между ними особой не вижу.
А вот чтобы полностью от них отказаться - это уж как-то черезчур радикально

mrLanu [8:18 PM]
@vch я вообще за то что бы здесь меньше умничали, кому не нравится проходим мимо.... вот зачем меня демотевировать тем фактом что жсп не используеться и хмл и тд. Люди пришли учиться сюда
А если кто хочет выступить с заявлением громким, то пожалуйста сразу предлагайте, что делать...

v.chernyshoff [8:21 PM]
ну давайте выучим нужные речёвки и хором будем их исполнять, чтоб не выбиваться из общего строя

vch [8:21 PM]
@mrLanu Воспринимай это как тренинг. Это ж действительно обучение. Расплывчатые ТЗ, масса новой и противоречивой информации (которую надо фильтровать, перепроверяя многократно и выискивая крупицы пользы), непрошенные советчики с не всегда правильными советами (это я про себя :)). 
В реальной работе - будет гораздо хуже.

v.chernyshoff [8:21 PM]
как и на любом хорошем курсе, Григорий начинает с основ, и это правильно
@vch как у тебя дела? (edited)
да, xml тоже не популярен :slightly_smiling_face:
ты как, трудоустроился?
в современных проектах инициализация бинов происходит через аннотации
но и JSP, и xml важно знать, конечно

vch [8:25 PM]
@v.chernyshoff Как бы я уже много лет трудоустроен... И, кстати, у нас все проекты на jsp

v.chernyshoff [8:26 PM]
а, вон оно что, понятно
у нас не знаю, есть ли JSP или нет, скорее всего, нет

mrLanu [8:27 PM]
Парни, харе флудить
Тут ветка для ДЗ

v.chernyshoff [8:27 PM]
в смысле, харе флудить? мы что, приколы с пикабу обсуждаем?
мы говорим о Java и сопутствующих ей технологиях, нет?

mrLanu [8:28 PM]
Но не о hw01
А там хмл и жсп

v.chernyshoff [8:28 PM]
так ты ж молчишь насчёт hw01, а то поговорили бы

mrLanu [8:28 PM]
Ветка Теслы в другом месте

v.chernyshoff [8:29 PM]
какой-то ты напряжённый, запишись на массаж, что ли
а то в ветке, где только что обсуждали JSP, нам уже нельзя обсуждать JSP :slightly_smiling_face:

mrLanu [8:31 PM]
Ты же его не обсуждаешь, ты прямо заявляешь, что нам его не надо

v.chernyshoff [8:31 PM]
или не-флудом считается, только когда ты обсуждаешь о JSP?
mrLanu
Шансов найти работу в разы больше с жсп
где я сказал, что вам его не надо?
ты не путай, я сказал, что технология сейчас не популярна, но о том, что вам не надо её изучать, я не говорил

mrLanu [8:32 PM]
Ладно, я здаюсь... умничай на здоровье

v.chernyshoff [8:32 PM]
более того
v.chernyshoff
как и на любом хорошем курсе, Григорий начинает с основ, и это правильно

aleksey [8:33 PM]
Я что-то пропустил? Ты с 11 го выпуска пришёл мудрости энтерпрайза поучить?

v.chernyshoff [8:34 PM]
то, что я пришёл поучить мудрости энтерпрайза, ты сам для себя решил

aleksey [8:34 PM]
А что ты тут забыл?

mrLanu [8:35 PM]
Повыпендриваться он решил...дедовщина :grin:

v.chernyshoff [8:35 PM]
на тебя посмотреть
aleksey
А что ты тут забыл?

aleksey [8:35 PM]
Клоун

v.chernyshoff [8:35 PM]
очень приятно. Вячеслав
ник поправь, а то по нику какой-то Алексей

Alex [8:36 PM]
вот так заходишь почитать по теме 1й недели, или по дз 0й, а тут тонны флейма и где-то между ними пара сообщении по теме. Жесткая модерация не помешала б конечно.

v.chernyshoff [8:38 PM]
я зашёл посмотреть, что нового в проекте, а тут в не терпящей возражений манере люди, услышавшие слово JSP на этой неделе, паучают, что без JSP никуда. и кто из нас решил повыпендриваться?
mrLanu
Повыпендриваться он решил...дедовщина :grin:

pro [8:38 PM]
не ссорьтесь, парни, поехали по конструктиву

mrLanu [8:42 PM]
Да я услышал про jsp на этой неделе, и что ? Я тебе больше скажу я про Java услышал 7 месяцев тому...
И что ? Мне повеситься ?

v.chernyshoff [8:44 PM]
категорично :slightly_smiling_face:
или пусть JSP захватит мир, или я повешусь
я тебя к суициду не склонял :slightly_smiling_face:

aleksey [8:46 PM]
Вот такими вы тоже станете после окончания курса.

v.chernyshoff [8:49 PM]
я просто хочу донести, что обычно клиентской частью занимается фронт. для прохождения проекта вы должны видеть, что вы делаете, а поскольку фронт-эндов тут нет, то да, придётся пару занятий его изучать. потом, занятий 8, вы будете изучать бэк, и я советую сосредоточиться на этих 8 занятиях, потому что JSP по сравнению со спрингом — детские шалости. а то, что кого-то удиивило, что кроме них в этом чате есть ещё люди, которые уже закончили этот курс, и у них от этого бомбануло — ну что ж, это ваши проблемы, живите с этим :slightly_smiling_face:

v.chernyshoff [8:55 PM]
не переживай, с тех пор, как я подключился, ни одного сообщения по теме не было. иначе бы, поговорили по теме, но пока тут твои "сокурсники" пытаются доказать, что у них **й длиней (edited)
Alex
вот так заходишь почитать по теме 1й недели, или по дз 0й, а тут тонны флейма и где-то между ними пара сообщении по теме. Жесткая модерация не помешала б конечно.

Alex [8:56 PM]
@v.chernyshoff, у нас вот несколько проектов. Есть старые, там JSP и JavaEE, есть новые, там Спринг и РЕСТ. И со всеми надо работать, а ресурсов рефакторить тонну jsp никто выделять не собирается, работает и нормально. Сфера банковского ПО, и так дофига где. Знание JSP вполне может пригодиться.

v.chernyshoff [8:57 PM]
это что, в ЦБ РФ вообще работают на Java 5
и без доступа к интернету
да у нас то же самое, есть ядро, написанное азиатами, эти лупни даже методы с большой буквы пишут, но мы делаем плавный переход на новое нормальное микросервисное ядро
Alex
@v.chernyshoff, у нас вот несколько проектов. Есть старые, там JSP и JavaEE, есть новые, там Спринг и РЕСТ. И со всеми надо работать, а ресурсов рефакторить тонну jsp никто выделять не собирается, работает и нормально. Сфера банковского ПО, и так дофига где. Знание JSP вполне может пригодиться.

mrLanu [9:02 PM]
Слушай ты, не лупень, ты просто выскочка... иди уже

v.chernyshoff [9:03 PM]
воу, воу, палехчи, ты не в родном колхозе
mrLanu
Слушай ты, не лупень, ты просто выскочка... иди уже

mrLanu [9:03 PM]
Ты же не прав, ты хоть это понимаешь ?

v.chernyshoff [9:03 PM]
в чём?

mrLanu [9:03 PM]
В том что иы делаешь

v.chernyshoff [9:04 PM]
конкретно, в чём я не прав, пожалуйста
в том, что не оскорбляю тебя в ответ на твои оскорбления?
так это потому, что бомбануло не у меня, а у тебя

mrLanu [9:05 PM]
К примеру, мне почти 40, я начал изучать программирование в июне прошлого года. Сюда тоже пришел учиться... если ты людей обзываешь лупнями, как это называеться ?

v.chernyshoff [9:05 PM]
а ты что, автор того азиатского кода?

mrLanu [9:05 PM]
Перкд кем ты решил выпендриваться ?
Да ты пиздец умный, мы поняли, что еще ?

v.chernyshoff [9:06 PM]
странно, что ты решил примерить на себя эпитет "лупень", хотя, я писал про азиатов, с чьим кодом мне приходится иметь дело

Andrew [9:06 PM]
А какой сейчас выпуск по счету ?

mrLanu [9:07 PM]
Нам похер с чем тебе приходится иметь дело, понимаешь ?

v.chernyshoff [9:07 PM]
нет, давай по существу. то, что ты бык, я уже понял. но ты уличил меня в неправильных действиях. в каких?
mrLanu
Перкд кем ты решил выпендриваться ?

Andrew Manik [9:07 PM]
Парни, хватит

v.chernyshoff [9:08 PM]
что такого неправильного показалось тебе красной тряпкой? личное мнение насчёт перспектив JSP? или что-то ещё?

mrLanu [9:08 PM]
You know what, fuck off

Andrew Manik [20 hours ago]
просто не отвечай ему:)


mrLanu [20 hours ago]
Спс, я понял уже


v.chernyshoff [9:09 PM]
понятно. ты обвинил меня в том, что не можешь объяснить. похоже, ты не совсем адекват
mrLanu
You know what, fuck off

Dmitry Dimidyuk [9:10 PM]
Optional задание это отдельный сервлет? Или прямо в MealServlet нужно реализивать? (edited)

dustnfox [9:11 PM]
Друзья, а вы не хотите в random со своей беседой переехать?

dmitry_ov [9:11 PM]
Коллеги,  перенесите во #flooding  свою беседу или в личку, пожалуйста. 
Делаю hw1 и часто отвлекаюсь на уведомления из этого чата.

v.chernyshoff [9:11 PM]
итак, я пришёл в чат и высказал своё личное мнение в русле беседы. гражданину @mrLanu это не понравилось и он назвал меня всякими нехорошими словами, и я же у него виноват. хотя, в чём именно моя вина, он внятно объяснить не может. интересно
думаю, гражданину лучше совместить курс topjava13 с курсом антидепрессантов
я вообще против этого флуда и стараюсь его не поддерживать, но гражданин всё успокоиться не может, а я воспитан отвечать людям :slightly_smiling_face:
dmitry_ov
Коллеги,  перенесите во #flooding  свою беседу или в личку, пожалуйста. 
Делаю hw1 и часто отвлекаюсь на уведомления из этого чата.

Andrew [9:16 PM]
@Dmitry Dimidyuk полагаю задание optional подталкивает нас на создание ряда сервлетов)) так как спринг mvc будем изучать позже)

LeoJames [9:20 PM]
А тут можно в черный список добавлять? Или всю стажировку пролистывать чат и фильтровать неадыкватов которые решили писюнами меряться в общем чате, который посвящен обсуждению текущего, вашу мать, задания. Снимите себе номер в мотеле и боритесь сколько угодно и в любых позах.

aleksey [9:24 PM]
Кстати, предлагаю ответы на конкретный вопрос оставлять в треде этого вопроса, а не писать в общий чат вперемешку


aleksey [20 hours ago]
Вот таким образом


pro [20 hours ago]
)


LeoJames [20 hours ago]
Да им же зрители нужны


Uniges [20 hours ago]
Поддерживаю!


Andrew [20 hours ago]
в таком флуде любой вопрос потеряешь


saudabaew [13 hours ago]
в рекомендациях к использованию Slack так и советуют, поддерживаю


Yevhen Maksymovych [9:29 PM]
ребят, я тут неожиданно для себя на несколько дней выпал из темы, а тут за это время уже кучу всего написали, наверняка на этот вопрос отвечали, но мне слака уже не даёт до начала докрутить

Vladimir [20 hours ago]
До четверга


Yevhen Maksymovych [9:29 PM]
сколько у нас времени на решение HW1? Когда следующее занятие?

aleksey [20 hours ago]
На сколько я понял выкладывается все в четверг. Если у тебя не включена проверка дз, то сроки на твоей совести


Yevhen Maksymovych [20 hours ago]
в том-то и беда, что включена :slightly_smiling_face: придётся поспешить


aleksey [20 hours ago]
думаю эти вопросы у кураторов в своем топике дз в частном порядке можешь спросить, думаю тут не самые строгие правила=)


dustnfox [20 hours ago]
Вот что Таня писала в general:
*Памятка*

1. Новые уроки выкладываем в ЧТ, крайний срок сдачи ДЗ на ревью - ВТ.
2. Перед тем как отдавать код на ревью, *внимательно* читаем *типичные ошибки* и *подсказки* по ДЗ, также обязательно проверяем и тестируем приложение.
3. Ревью кода происходит в след порядке:
 первое ревью
 мои замечания (если необходимо),
    правки,
 второе ревью.
Обычно 2-х ревью достаточно, но если есть необходимость - то возможно 3-ее ревью.
4. Код с правками на ревью принимается до выхода нового урока.
5. Крайний срок сдачи ДЗ во ВТ, но если хотите получить более одного ревью - то старайтесь сдавать ДЗ в ВС-ПН
6. Если не успеваете сделать полностью ДЗ - то присылайте то, что есть.
7. Не бойтесь задавать вопросы. Настоятельно рекомендую их задавать, а также активно учавствовать в обсуждении ДЗ в общем слаке. НО перед тем как задать вопрос - погуглите (большая часть часть инфо на англ., поэтому приучаемся гуглить на англ).
8. Подходите серьезно к ДЗ, просто посмотреть чужое решение недостаточно. Это как учиться кататься на велосипеде. Нужно все пробовать самому, если только смотреть как кто-то красиво делает трюки - сам не научишься.
9. Если форс-мажор и не успеваете - предупреждайте заранее, возможно перенести проверку на пару дней позже (но не превращайте такой подход в привычку :wink: )


Vladimir [9:31 PM]
CRUD в памяти это H2/HSQLDB?

mrLanu [20 hours ago]
Это List


Dmitry Dimidyuk [20 hours ago]
нет, просто list в оперативной памяти


aleksey [20 hours ago]
А ещё лучше в мапу потокобезопасеую где ключ это id. Так ближе к структуре бд и меньше кода в dao (edited)



pro [20 hours ago]
вот хорошо что вы об этом написали, а то я уже начинал приделывать PostgreSQL)))


Andrew [20 hours ago]
пока ж вроде без БД делаем или нет ?


Dmitry Neustupov [20 hours ago]
@Andrew пока без БД



pro [20 hours ago]
сразу движений меньше стало раза в три))  спасибо, парни, вы, можно сказать, 2/3 за меня сделали))


Grigory Kislin [9:49 PM]
на тему jsp-rest-js фреймворков добавлю, что все проекты уникальные
где то даже смешивают. во wrike например был jsp + js+dart:)
на вопрос надо ли бэкэнду минимальное знание js я отвечал тут:
https://www.youtube.com/watch?v=J9yDOGT2BhE&feature=youtu.be&t=367
YouTubeJava Enterprise Online Обучение
Вебинар: ОСВАИВАЕМ JAVA Spring/JPA ENTERPRISE

aleksey [20 hours ago]
будет ли в этом курсе затрагиваться REST хотя бы в обзорном варианте без фронтэнда?


dmitry_ov [9:49 PM]
uploaded and commented on this image: Screen Shot 2018-03-04 at 22.49.17 

Так же должно получиться ?

Grigory Kislin [9:51 PM]
почему нет:)? дело вкуса
я сделал как в демо

dustnfox [9:51 PM]
commented on dmitry_ov’s file Screen Shot 2018-03-04 at 22.49.17
Символа "T" не должно быть между датой и временем


Mikhail Makar [9:52 PM]
Провозился с тернарным оператором)

dmitry_ov [20 hours ago]
1.2 Сделать отображения списка еды в JSP, цвет записи в таблице зависит от параметра exceed (красный/зеленый).


dmitry_ov [20 hours ago]
Цвет записи и сделал :slightly_smiling_face:


Mikhail Makar [20 hours ago]
Да, не парься тогда, видимо я просто загнался и хотел цвет текста менять)))


Andrew [19 hours ago]
а какие проблемы чтобы поменять ?


Andrew [19 hours ago]
<tr style="color: ${!item.exceed ? '#00ff00 ': '#ff0000 '};">
 


dmitry_ov [19 hours ago]
Можно еще короче :slightly_smiling_face:

<tr bgcolor=“${num.isExceed() ? ‘red’ : ‘green’}“>



Grigory Kislin [9:53 PM]
еще раз всем напомню - расписание и темы занятий: https://github.com/JavaWebinar/topjava (edited)
JavaWebinar/topjava
Watchers
1
Stars
1
Forks
19
Last updated
10 days ago

Alex83 [11:08 PM]
Срач развели дикий. Стало даже интереснее HW1 )

Dmitriy Kozin [11:23 PM]
uploaded this image: Чисто похвалиться 


realcorwin [11:47 PM]
@Andrew можно и в один сервлет всё запихать (doGet и doPost вполне хватает для всего). но что-то я гляжу на то, что получилось и хочется всё снести и сделать отдельный сервлет Edit :slightly_smiling_face:.

Dmitry Makarov [4:11 AM]
commented on Dmitriy Kozin’s file Чисто похвалиться
Чаек 1000 ккал - это сильно

saudabaew [5:05 AM]
больше всего ненавижу две вещи - расизм и азиатских лупеней)

Olga [6:11 AM]
почитала... не соглашусь с xml. Весь soap - построен на xml, и является точкой интеграции и обмена информацией между различными АС. Rest-ы c json-ами конечно в моде. Но soap жил, живет и еще долго будет жить. У меня на работе наша система со многими смежными обменивается через очереди (jms). А сообщения шлем/получаем в формате xml. Так что xml - учить нужно!

v.chernyshoff [7:01 AM]
У нас межсервисный обмен происходит через Kafka, а наружу, конечно, REST + JSON
Olga
почитала... не соглашусь с xml. Весь soap - построен на xml, и является точкой интеграции и обмена информацией между различными АС. Rest-ы c json-ами конечно в моде. Но soap жил, живет и еще долго будет жить. У меня на работе наша система со многими смежными обменивается через очереди (jms). А сообщения шлем/получаем в формате xml. Так что xml - учить нужно!
* лупней
saudabaew
больше всего ненавижу две вещи - расизм и азиатских лупеней)

saudabaew [7:08 AM]
тебе лучше знать

aleksey [10 hours ago]
Он человек простой, правит код у азиатов на работе и орфографию в комментариях в свободное время.


Andrew [8 hours ago]
Кому-то что-то доказывать последнее дело.


pro [7:40 AM]
commented on Dmitriy Kozin’s file Чисто похвалиться
c сахарком
Dmitriy Kozin [7:41 AM]
Синтаксическим )

v.chernyshoff [7:47 AM]
У нас только один фулл-стек притащил liquiBase, там, конечно, только xml, я размышлял о его применении при инициализации БД одного сервиса, но заглянул, ужаснулся и вышел.
Olga
почитала... не соглашусь с xml. Весь soap - построен на xml, и является точкой интеграции и обмена информацией между различными АС. Rest-ы c json-ами конечно в моде. Но soap жил, живет и еще долго будет жить. У меня на работе наша система со многими смежными обменивается через очереди (jms). А сообщения шлем/получаем в формате xml. Так что xml - учить нужно!

alexey [8:10 AM]
Подскажите пожалуйста. А при открытии странички, записи еды уже должны там быть или как они должны туда попадать?

aleksey [9 hours ago]
Их предлагается захардкодить. Но если ты делаешь optional, то создание новой еды ты можешь оформить через страничку с формой создания


alexey [9 hours ago]
то есть , я делаю класс с листом еды, где добавляю ее, а потом вызываю его в сервлете?


aleksey [9 hours ago]
Да, можно в list, а лучше в map. Вызываешь не в сервлете, а через dao  слой. https://danielniko.wordpress.com/2012/04/17/simple-crud-using-jsp-servlet-and-mysql/ тут можешь считать референс с dao слоем
WordPress.com danielniko
Simple CRUD Using Jsp, Servlet and MySQL
You can view and download the complete source code of this tutorial from my github account.
In this tutorial, we will create a simple CRUD (Create Read Update Delete) User Management Web Application using Jsp, Servlet and MySQL.
For this tutorial, we will need the following tools: (The older or newer version should also works). Moreover, basic Java knowledge is assumed.
1. Eclipse IDE for Java EE Developers (Indigo – ver. 3.7)
2. Apache Tomcat ver 7.0 Show more…
 


alexey [9 hours ago]
спасибо. а для  List<MealWithExceed>  старт тайм и енд тайм мы через запрос передаем?


aleksey [9 hours ago]
Просто везде сейчас прописываем максимальное и минимальное возможное значение, чтобы ничего не отфильтровывалось


Евгений Глушков [10:25 AM]
@alexey при открытии страница выполняет запрос GET к сервлету, на что сервлет в методе doGet запихивает в параметр response лист с едой, и отправляет его в ответ странице. И тогда его можно использовать.

aleksey [7 hours ago]
Страница не делает никаких запросов. Страница полностью формируется сервлетом на серверной части с уже прописаны списком


Andrew [7 hours ago]
Страницу формирует jsp насколько я знаю, а сервлет лишь передает в нее данные


aleksey [7 hours ago]
jsp тоже сервлет (edited)

Aleksei Kirillov [7 hours ago]
Мне кажется наоборот, сервлет готовит данные, а затем делает forward


Aleksei Kirillov [7 hours ago]
А jsp уже выводит подготовленные данные

Andrew [7 hours ago]
Интересное мнение, что jsp это сервлет...


Andrew [7 hours ago]
Я то его воспринимаю как гибрид html с java кодом

Andrew [7 hours ago]
Alexey ты хде такое вычитал ?


aleksey [7 hours ago]
http://java-course.ru/student/book1/jsp/
Цитата из статьи: " И я еще раз НАСТОЙЧИВО говорю начинающим — JSP является СЕРВЛЕТОМ." (edited)


aleksey [7 hours ago]
так что у нас один сервлет получает request/response и передает их в другой сервлет


Andrew [7 hours ago]
А ты типо профи ?


aleksey [7 hours ago]
это цитата из статьи, потому я поместил в кавычки


vch [7 hours ago]
@Andrew Все jsp страницы при первом выполнении преобразуются в обычные сервлеты типа такого:
```public final class settings_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {
```
Их исходники (т.е. java-файлы)  можно увидеть в Tomcat в папке work


Andrew [7 hours ago]
Ну я вижу, и наследуються они вижу от httpjspbase, не знаю кто у него прородители, но привычней вьюху отделять  от прочего

Andrew [7 hours ago]
Сейчас не за компом увы


Andrew [7 hours ago]
А не обобщать


vch [7 hours ago]
@Andrew
```public abstract class HttpJspBase extends HttpServlet implements HttpJspPage {```


Евгений Глушков [7 hours ago]
т.е. jsp - это всё таки не сервлет, а то на основе чего будет сгенерирован сервлет, который будет взаимодействовать с другими сервлетами


Евгений Глушков [7 hours ago]
?

vch [7 hours ago]
ну можно и так сказать


Andrew [7 hours ago]
К чему был шум алексея не понятно


aleksey [7 hours ago]
К тому что страница по прежнему не делает никуда никаких запросов


Евгений Глушков [7 hours ago]
мы ведь можем вообще обойтись без jsp, а сформировать "волшебный сервлет", который будет полностью генерить html-код и отправлять его в ответ браузеру.


Евгений Глушков [7 hours ago]
ну простите запросы делает браузер


aleksey [7 hours ago]
Извини, возможно я просто не правильно тебя понял, звучало как будто ты описываешь общение через ajax


Andrew [7 hours ago]
Алексей Jsp это динамические страницы, а кто делает запросы?


aleksey [7 hours ago]
Jsp формирует статическую страницу и отсылает её клиенту


Andrew [7 hours ago]
)))


Евгений Глушков [10:38 AM]
@Grigory Kislin не будет большой беды если не мапить сервлеты в WEB.xml, а пользоваться @WebServlet?

Yevhen Maksymovych [11:09 AM]
ребята, поясните, плз по патчам на домашку. я их все последовательно поприменял, у меня в ченджлисте они все светятся. теперь вот так и коммитить после последнего патча, или они нужны только чтобы смотреть, чего меняется синхронно с роликами, и, в принципе, после последнего ролика их полку можно удалить, и сделать апдейт с гита?

dmitry_ov [5 hours ago]
У тебя же свой репозиторий
Ты не сможешь сделать апдет


dmitry_ov [5 hours ago]
Для того патчи и выдаются, что бы ты мог в своей ветке master вести историю параллельно  оригинальному репозиторию topjava (edited)


Andrew [11:17 AM]
Комить и пуш в мастер

Yevhen Maksymovych [11:27 AM]
а зачем тогда Григорий выкладывает в https://github.com/JavaWebinar/topjava версию со всеми апдейтами? оттуда не надо форкаться, просто на всякий случай? (edited)

Ilya [11:32 AM]
Скорей всего как дополнение. лучше комитить и пуш, как было сказано - я сегодня почти все угробил, решил немного инициативы проявить

alexey [11:47 AM]
народ а из IDEA как задать applicationContext ??

dyakoven [6 hours ago]
Run -> Edit configurations ->вкладка Deployment


alexey [6 hours ago]
спасиб


Aleksei Kirillov [12:27 PM]
я так понял, что мы тренируемся ставить патчи, делать ветки, переключаться между ними, откатывать, если что-то сломаем.

dmitry_ov [5 hours ago]
Типа того


Mikhail Makar [1:34 PM]
Такой вопрос уже был наверняка, кто форматировал дату в jsp?

pro [4 hours ago]
написал тег который принимает LocalDateTime и выводит в браузер отформатированную дату:

<%@ tag body-content="empty" pageEncoding="UTF-8" trimDirectiveWhitespaces="true" %>

<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%@ attribute name="date" required="true" type="java.time.LocalDateTime" %>
<%@ attribute name="pattern" required="false" type="java.lang.String" %>

<c:if test="${empty pattern}">
   <c:set var="pattern" value="dd/MM/yyyy"/>
</c:if>

<fmt:parseDate value="${date.toLocalDate()}" pattern="yyyy-MM-dd" var="parsedDate" type="date"/>

<fmt:formatDate value="${parsedDate}" type="date" pattern="${pattern}"/> (edited)


dmitry_ov [4 hours ago]
Или так: 
https://gist.github.com/ovcharenkodi/a3e22331d30fef7de07490018dbfd99c



Mikhail Makar [4 hours ago]
Благодарю!
Сделал через установление атрибута в сервлете!


Aleksei Kirillov [1:37 PM]
я создал в сервлет статический DateTimeFormatter и пробрасывал его в jsp через атрибут

Mikhail Makar [4 hours ago]
Спасибо тебе, добрый человек!):slightly_smiling_face: Всё заработало)


v.chernyshoff [1:58 PM]
нужно только накатывать патчи и пушить в свою ветку
Yevhen Maksymovych
а зачем тогда Григорий выкладывает в https://github.com/JavaWebinar/topjava версию со всеми апдейтами? оттуда не надо форкаться, просто на всякий случай?

pro [2:00 PM]
можно и оттуда форк сделать, но тогда ты не познаешь что значит "вокруг света на велосипеде за 80 дней"

dmitry_ov [2:33 PM]
@Yevhen Maksymovych Да. Что бы ты мог сверится с оригинальным репозиторием, если вдруг что то пойдет не так (edited)
Yevhen Maksymovych
а зачем тогда Григорий выкладывает в https://github.com/JavaWebinar/topjava версию со всеми апдейтами? оттуда не надо форкаться, просто на всякий случай?

jawinterod [2:34 PM]
2.4 Сделать форму редактирования в JSP.
Но у нас все поля класса Meal final. Какие образом редактирование осуществить? Убирать модификатор?

aleksey [3 hours ago]
Создавать новый экземпляр meal и ставить его на место старого экземпляра в структуру, которая у нас хранит набор meal



dustnfox [3 hours ago]
Ну или таки убирать final. Решение за тобой как за разработчиком. :wink: Выбирай лучшее на твой взгляд решение из тех, которые можешь придумать.



aleksey [3 hours ago]
Если есть желание, то я могу попытаться объяснить, почему я считаю, что убирать final не лучшая мысль.


pro [3 hours ago]
@aleksey извольте, пожалуйста. Где то встречал такую мысль, что в последней версии java модификатор final сделали умным, и если вдруг тебе понадобилось само поле изменить, то оно без лишнего базара изменяется (edited)


aleksey [2 hours ago]
я скорее не про final в частности, а о идее убрать final и добавить сеттеры на поля meal. У нас по факту нигде в приложении ничего, кроме разве что id, сетить не надо.


dustnfox [2 hours ago]
Согласен. В данном случае проще и лучше, на мой взгляд, пересоздать объект на основании данных, что пришли из jsp для редактирования. И таком случае необходимость сеттеров отпадает сама собой.



dustnfox [2 hours ago]
Мое сообщение было о том, что нет ничего страшного в изменении модели, что и подчеркивал Григорий в первом задании. Если считаете, что нужно менять модель и так будет лучше - вперед. Ну а было ли это оправдано решит code review :slightly_smiling_face:


jawinterod [2 hours ago]
Всем спасибо! Всё сделал. Про новый экземпляр в голову даже не пришло. Пора наверно отдохнуть.


jawinterod [2 hours ago]
И всё же убрал final и выставил сеттеры... У меня на new Meal() счетчик id стоит статиком. Некрасиво получается.


Ma3stro [4:43 PM]
Как при выполнении запроса на странице (например /meals?action=delete&id=1) сделать перезагрузку страницы обратно на /meals?

Dmitriy Kozin [1 hour ago]
response.sendRedirect("meals");



pro [40 minutes ago]
delete тоже необходимо реализовать?


Dmitriy Kozin [36 minutes ago]
Опционально сделать CRUD. А значит create, read, update и delete... (edited)


realcorwin [31 minutes ago]
Ну или response.sendRedirect("/topjava/meals");


vch [16 minutes ago]
@realcorwin А вот topjava указывать, наверно, не стоит. Теоретически приложение не должно знать, по какому пути оно выложено.


dmitry_ov [5:14 PM]
Правильно я понял hw1 Optional:  Данные у нас в памяти и существуют пока работает приложение ?

knkv [5:16 PM]
Да, при перезапуске сервлета данные обнуляются.

Dmitriy Kozin [5:19 PM]
Задеплоил на хероку ради приколюхи. https://resumeappdsk.herokuapp.com/

Ma3stro [17 minutes ago]
Вёрстка красивая)


Dmitriy Kozin [15 minutes ago]
Простой bootstrap http://getbootstrap.com
getbootstrap.com
Bootstrap
The most popular HTML, CSS, and JS library in the world. (232 kB)


mrLanu [12 minutes ago]
А есть инструкция как туда деплоить ?


Dmitriy Kozin [12 minutes ago]
В basejava была..


Vladimir [11 minutes ago]
на самом хероку простейшая инструкция


Yevhen Maksymovych [5:20 PM]
ребят, а подскажите такую штуку
в мавене по alt+ins артефакт jstl не находит
но если добавить вручную, находит и выкачивает из репа
это что за такие двойные стандарты у мавена?

Vladimir [5:23 PM]
когда и фон и текст зеленые/красные - незачетно выглядит :slightly_smiling_face:
Dmitriy Kozin
Задеплоил на хероку ради приколюхи. https://resumeappdsk.herokuapp.com/


Vladimir [5:51 PM]
Надо бы сделать CRUD, но вот с чего начать?!...

alexey [6:53 PM]
Народ может кто пояснит!? что бы получить данные из сервлета и избежать <%%> мы можем воспользоваться JSTL. и для этого должны воспользоваться конструкцией типа <c:out value="${контекст.переменная}" />. А при передаче переменной из сервлета мы какой контекст используем? Иными словами как из JSP обратиться к переменной сервлета?


ilya t. [1 day ago]
<p><a href="UserController?action=insert">Add User</a></p> ты случайно не это имеешь ввиду, переменную сервлета до параметра action? у меня здесь ссылка на UserController не работает, думал зависит от <display-name> в web но видимо нет (edited)


alexey [1 day ago]
да я просто не понимаю как в JSP принять атрибут, когда в сервлете делаешь request.setAttribute.


ilya t. [1 day ago]
аа, ну у тебя должны быть равны имя атрибута и в jsp итем типа такого req.setAttribute("listOfAllMeals", list); и в jsp <c:forEach items="${listOfAllMeals}" var="meal">


ilya t. [1 day ago]
у меня так выводит


alexey [1 day ago]
а если не список а переменную просто?


Aleksey Vra [1 day ago]
так же
request.setAttribute("meal", meal);
<input type="text" ... value="${requestScope.mea}" hidden/>


Aleksey Vra [1 day ago]
можно и без requestScope


Anton Kiselev [8:06 PM]
Поясните, плиз. Заполняю форму на addMeal, -> doPost создает new Meal() ->добавляет в список, обновляет -> и передает опять в meal.jsp который все это дело выводит, так?

Dmitriy Kozin [1 day ago]
Так. Только вначале преобразует Meal в MealWithExceed


Anton Kiselev [1 day ago]
@Dmitriy Kozin да. так. просто у меня после обновления весь список затирается


Dmitriy Kozin [1 day ago]
Он должен затираться после редеплоя.


Dmitriy Kozin [1 day ago]
После `doPost` ставь `response.sendRedirect("meals");` , а не `...forward....` (edited)


Anton Kiselev [1 day ago]
@Dmitriy Kozin понял, спасибо


Alex83 [8:10 PM]
Господа, а возможно использовать встроенным томкатом?
И просто депенденси добавить в мавен?

vch [8:15 PM]
@Alex83 А на 6 занятии не оно будет? `•Конфигурирование Tomcat через maven plugin`

Alexander Sinayko [8:17 PM]
Ну лично я предпочитаю embended tomcat в spring boot. Все вместе без головной боли, но к чему этот вопрос? Хочется новых ощущений или же сложности какие? Или же узнать теоретически возможно ли это?

Alex83 [1 day ago]
Не хочется качать томкат. Хочу запустить и сразу пойти в локалхост


Ma3stro [8:24 PM]
added this Plain Text snippet: Untitled 
Где правильно объявить list для crud манипуляций с едой? Я объявил его в имплементации crud интерфейса, но работать сие отказывается. При такой реализации у меня теперь не работает даже отображение стандартное, но почему?
Например:
```public class ImplMealDao implements MealDao {
  private List<Meal> list;
  @Override
Dmitriy Kozin [8:27 PM]
Есть несколько моментов. `List` это интерфейс и просто так в него ничего положить или удалить нельзя. Для этого как минимум инициализировать например `ArrayList'ом`.
vch [8:27 PM]
А где реализация `addMeal` ?
Dmitriy Kozin [8:28 PM]
А во вторых лучше воспользоваться `Map` в которой ключем будет id-шник, а значением сам объект.

Ma3stro [8:29 PM]
addMeal у меня пока что реализован как list.add(meal)

mrLanu [1 day ago]
Я к примеру сделал отдельный класс сингелтон, в него запихнул потокобезопасную МАПу, ключ в ней id. Там и начальные даные захардкодил... получилась имитация БД


Ma3stro [8:34 PM]
Да, кажется, работа с мапой выглядит целесообразней. Буду пробовать

pro [8:36 PM]
лучше б я не пробовал того о чем ты сейчас написал)) тебе прийдется пересчитывать все калории/день чтобы на вьюшку отправлять корректную мапу, но у тебя в ютил классе все настроено для работы со списком))

mrLanu [1 day ago]
Так в дао можно еще метод положить который вернет лист из мапы



mrLanu [1 day ago]
Список еды то что в мапе это как бы БД, а еда с exceeded это уже сервис, на мой взгляд



pro [1 day ago]
можно и так сделать, спасибо))


pro [1 day ago]
как раз отдебажил свои костыли которые я наделал в ютил классе, и он сам начал нормально считать все))


dmitry_ov [10:09 PM]
Подскажите как из JSP страницы передать UserMeal в сервлет ?

aleksey [23 hours ago]
На странице создаешь html form, через нее отсылаешь сервлету где она обрабатывается в doPost сервлета


dmitry_ov [23 hours ago]
Есть пример формы ?


dmitry_ov [23 hours ago]
html формы которая шлет данные в запросе в сервлет


aleksey [23 hours ago]
Тебе конкретную из домашнего задания?


Aleksey Vra [23 hours ago]
например
```<form method="post" ...
<input type="text" ... value="${requestScope.meal.id}" hidden/>```
в сервелете ловим id, например req.getParameter("id")


dmitry_ov [23 hours ago]
Нашел пример


dmitry_ov [23 hours ago]
<form action="meals.jsp" method="post">

   Name: <input type="text" name="firstName">

    <input type="submit">
</form>


dmitry_ov [23 hours ago]
А как настроить <form action= ?


dmitry_ov [23 hours ago]
Что бы в сервлет приходили данные


Aleksey Vra [23 hours ago]
в конце формы кнопку добавить submit

Aleksey Vra [23 hours ago]
```<input type="submit" value="Submit"/>```

dmitry_ov [23 hours ago]
Как форма поймет на какой url отправлятся ?


aleksey [23 hours ago]
в action url твоего сервлета (edited)


Aleksey Vra [23 hours ago]
action="meals"
meals перехватывается (web.xml) и отправляет на сервелет

aleksey [23 hours ago]
<form action=URL method="post">

dmitry_ov [23 hours ago]
Да!!


dmitry_ov [23 hours ago]
Пришло в doPost


dmitry_ov [23 hours ago]
Спасибо парни


aleksey [23 hours ago]
обращайся=)


dmitry_ov [23 hours ago]
Писал <form action=“/meals” method=“post”>

Не мог понять в чем проблема


Aleksey Vra [22 hours ago]
я вот постоянно путаюсь где писать / а где нет,
та же ерунда в sendRedirect и getRequestDispatcher


dmitry_ov [10:58 PM]
делаю форму так 
https://gist.github.com/ovcharenkodi/ffc42221433569145904c44c5cee7011

dmitry_ov [10:58 PM]
shared this HTML snippet: _.html 
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
  <title>Title</title>
</head>
<body>
​
<form action="meals" method="post">
  Name: <input type="text" name="firstName" value="${name}" >
  <input type="submit">
</form>
​
</body>
</html>
Collapse 

Aleksey Vra [10:58 PM]
запустил таки на хероку наконец то после часа плясок с бубном https://hw1app.herokuapp.com/ ))

dmitry_ov [10:59 PM]
в doPost получаю request.getParameter(“name”) и  приходит null 
Что делаю не правильно? (edited)

Aleksey Vra [22 hours ago]
в doPost попробуй получить мапу со всеми параметрами и посмотри что получаешь
``` request.getParameterMap()```


Aleksey Vra [22 hours ago]
```name="firstName"```


Aleksey Vra [22 hours ago]
вот имя переменной (edited)


dmitry_ov [22 hours ago]
Точно !


dmitry_ov [22 hours ago]
@Aleksey Vra Спасибо большое (edited)


Jury Mironov [10:52 AM]
Сколько накатали..
"4 Хранить нужно Meal и конвертировать ее в MealWithExceed когда отдаем список на отображение в JSP. Иначе при редактировании любой записи или изменении юзером своей нормы caloriesPerDay нужно будет пересчитывать все записи юзера."
А у нас есть варианты? У нас есть метод из прошлого дз, который делает подсчет калорий. Он сам и конвертирует (edited)

Jury Mironov [10:55 AM]
Можно в CRUD не делать счетчик id, а просто использовать лист? А порядковый номер в листе и будет id. Можно сделать 100500 записей, удалить 100499 и будет у нас одна запись с id 100500:face_with_rolling_eyes:

dustnfox [10 hours ago]
Если без id, то порядковый номер записи в листе может меняться при удалении. Учитывая, что с DAO работает больше одного потока получится лажа. У тебя есть лист с одним meal. Ты его получил и отправил на фронт. Порядковый номер у него - 1. Теперь с фронта прилетает запрос на удаление meal с порядковым номером 1 из листа. Нет никакой гарантии, что за это время другой поток уже не удалил его из листа и не добавил новый meal. И он тоже будет с порядковым номером 1 в листе. То есть обрабатывая запрос на удаление ты дропнешь не тот объект, который имелся в виду при запросе.



Jury Mironov [10 hours ago]
Понятно, спасибо


dustnfox [10 hours ago]
не за что. Еще нужно иметь в виду, что при добавлении объекта, id в хранилище нужно увеличивать и тут тоже про многопоточность забывать не следует ибо инкремент через ++ - не одна операция, а целых три. Чтение из ОЗУ/кэша, сложение с единицей и запись в ОЗУ/кэш. И соответственно посреди все этой истории ОС может переключить контекст исполнения.


Jury Mironov [10 hours ago]
Да, вот сижу и думаю, че делать с этим

dustnfox [10 hours ago]
https://docs.oracle.com/javase/tutorial/essential/concurrency/
Но там много букаф. Можешь что-то поискать в гугле, чтобы покороче. По поводу этого вагон всего написан. 
Еще есть хороший канал: https://www.youtube.com/playlist?list=PL0GA_yfxrLGW7QuY418WgBPMx7GN1TchC
Там товарищ наглядно показывает, как это делать и  главное ЗАЧЕМ это делать, наглядно демонстрируя в коде к чему может привести недостаточная синхронизация многопоточных приложений. Но, к сожалению, на английском это все.
docs.oracle.com
Lesson: Concurrency (The Java™ Tutorials > Essential Classes)
This Java tutorial describes exceptions, basic input/output, concurrency, regular expressions, and the platform environment
 YouTube
Java: Multi-threading - YouTube
By Cave of Programming
 
 


Jury Mironov [9 hours ago]
спасибо


Ma3stro [3:02 PM]
Кто как получал дату при вводе из jsp?
И какой тип использовать - text с парсингом или date/datetime-local?

Aleksey Vra [6 hours ago]
```<fmt:parseDate...>
<fmt:formatDate...>```
или
```<javatime:parseLocalDateTime...
<javatime:format...```


Ma3stro [6 hours ago]
Я не про это) Я уже реализую crud и разбираюсь с вводом даты


Aleksey Vra [6 hours ago]
форма ввода даты? на странице с ДЗ ссылка есть на html формы


Ma3stro [6 hours ago]
Разобрался!) (edited)


Baravader [3:36 PM]
Ребятки,подскажите, что то не догнал я
Делал fork проекта JavaOPs/topjava это было HW0,a HW1 уже на проекте JavaWebinar/topjava, его тоже форкать и всё переделывать под него? Или так и продолжать через JavaOPs и всё будет кульком?

Ma3stro [5 hours ago]
JavaWebinar уже не нужно форкать. Этот проект ведется параллельно для наглядности, в крайнем случае можно будет оттуда форкнуться если каким-то образом потеряешь текущий проект и будет лень накатывать все патчи


Baravader [5 hours ago]
Благобдарю!


Ma3stro [3:39 PM]
uploaded and commented on this image: Screenshot_1.png 

У меня почему-то при добавлении новой записи (через crud) id становится в несколько раз больше последней записи...

dmitry_ov [3:46 PM]
Коллеги : как хранение данных  организовываете ?
В MealsUtil реализуете CRUD интерфейс ?

vch [3:48 PM]
@dmitry_ov А причём тут util? По идее это полноценный DAO слой уже у нас должен быть

dmitry_ov [5 hours ago]
Где инициализировать dao ?


vch [5 hours ago]
@dmitry_ov Ты про заполнение начальной базы? Можно в конструкторе имплементации dao-класса.


dmitry_ov [5 hours ago]
Мне не ясно где разместить dao так что бы сервлеты могли обращатся в процессе работы


dmitry_ov [5 hours ago]
я со своей колокольни начинающего понимаю так:  После точки входа в программу надо объявить класс хранилище, создать на него ссылку, к этой ссылке обращаться из сервлетов


dmitry_ov [5 hours ago]
Вот где точка входа в получившемся  после 1-го урока приложении - мне не ясно


dmitry_ov [5 hours ago]
приложение создает 2 сервлета, которые работают сами по себе.
Как можно между ними  общие данные расшарить я хз(


vch [5 hours ago]
@dmitry_ov Да пока без разницы. Можно прямо в сервлете создать экземпляр dao-класса (как член класса). У нас же только 1 сервлет будет использовать это dao пока. Но если хочешь по модному - то синглтон сделай. С ленивой инициализацией.


vch [5 hours ago]
@dmitry_ov Вроде meal dao нужно только в 1 сервлете?..


dmitry_ov [5 hours ago]
Вроде да

dmitry_ov [5 hours ago]
Но разве между запросами к приложению сервлеты не убиваются ?


dmitry_ov [5 hours ago]
имхо сервлет создается только при обращении к tomcat


dmitry_ov [5 hours ago]
Я не прав?

vch [5 hours ago]
@dmitry_ov Нет. Сервлет создаётся 1 раз. И все запросы попадают в него. Т.е. 1 объект сервлета используется в многопоточном режиме. И он не уничтожается в процессе работы.
 


vch [5 hours ago]
Но я бы синглтон сделал. Через enum. Тем более что всё равно dao по ТЗ надо оборачивать в интерфейс, никакой util тут не прокатит.


Dmitriy Kozin [5 hours ago]
Для тех кто был на basejava создание CRUD не проблема. Создавать синглтон не вижу смысла, ибо сами же говорите - сервлет создается один раз. А объект какого-либо круда (стораджа) можно параметризировать и использовать для хранения других объектов. (edited)


Dmitriy Kozin [5 hours ago]
Или тех же объектов но в другом аспекте...


pro [4:10 PM]
ни у кого не было такой байды: после редактирования записи(meal) меняется кодировка, и отображение описания(description) в консоли/браузере наламывается; где можно вправить кодировку? (в идее file->settings->encoding всюду{в трех полях} проставил utf-8, не помогло)

Aleksey Vra [5 hours ago]
у меня в консоли идеа слетала кодировка получаемых параметров, добавил
```request.setCharset("UTF-8");```


vch [5 hours ago]
@pro раздел "Вопросы по HW1" пункт 3 не помогает?


pro [5 hours ago]
спасиб, сейчас попробую; гляну, что там за вопросы, я упустил их, видимо


pro [5 hours ago]
спасибо, парни; добавил первой строчкой в метод request.setCharacterEncoding("UTF-8"); и все ок


Aleksey Vra [4 hours ago]
с названием метода немного ошибся )


Dmitriy Kozin [4:34 PM]
Я перед следующим занятием чувствую себя как человек, купивший билет спортлото перед розыгрышем.. Сколько угадал правильно реализаций? 3 из 20? 15 из 30? 10 из 10?

vch [4 hours ago]
Неужели даже 13 типичную ошибку не допустил? Почти все прокалываются на ней. В HW2, впрочем, тоже.


Dmitriy Kozin [3 hours ago]
Я просто синхронизировал метод возврата и приращения идшника (волатильного) при сохранении элемента. Как ее еще опотокобезопасить я не знаю..


vch [3 hours ago]
@Dmitriy Kozin намекаю - вставки/удаления и т.п. операции тоже требуют внимания.


Dmitriy Kozin [3 hours ago]
Заменил Map на ConcurentMap  :nerd_face:


Tanya [1 hour ago]
> 12 volatile при ++ не помогает от многопоточности. Почему?
(edited)


vch [1 hour ago]
@Tanya там у него обернуто synchronized. Некрасиво, но вроде должно сработать.


Tanya [1 hour ago]
ConcurentMap + synchronized + volatile?


vch [1 hour ago]
Новый вариант с ConcurrentMap я не видел, надеюсь её не пришлось синхронизировать...


Dmitriy Kozin [31 minutes ago]
Volatile не помогает при многопоточности, он гарантирует, что измененная переменная не останется в кэше. Синхронизед только на выдачу идшников объектам при сохранении. ConcurentMap должен защитить при удалении / вставке.. Как то так..


Dmitry Makarov [4:52 PM]
@Ma3stro так сложно сказать. Нужно дебажить строку в которой создается айди. Судя по номерам коллекция пробегается 3 раза (edited)

mrLanu [5:34 PM]
Всем привет. Кто подскажет ? Есть class Tools который расширяют два класса class Hummer & class Saw. Есть class Carpenter у которого имеется private Tools tools поле. Как это все запихнуть в таблицы хибернейтом. Лично для меня непонятно поле tools которое может хранить 2 класса...:thinking_face:

vch [4 hours ago]
@mrLanu И это всё нужно для выполнения HW1 ???


mrLanu [4 hours ago]
Мне да


dmitry_ov [4 hours ago]
" у которого имеется private Tools tools поле."

one-to-one связь ?


dmitry_ov [4 hours ago]
всего 4 таблицы в БД понадобиться


dmitry_ov [4 hours ago]
для всех сущностей

dmitry_ov [4 hours ago]
Tools не будет хранить 2 класса


Yevhen Maksymovych [3 hours ago]
у карпентера объявляешь поле List<Tool> tools и аннотируешь его @OneToMany


mrLanu [3 hours ago]
Благодарю, буду размышлять)


Dmitriy Kozin [3 hours ago]
Есть два варианта - хранить в разных таблицах и создавать поля для каждого дополнительного поля в расширенных классах (3 таблицы получится - Тулзы, Пилы, Молотки), либо одна таблица, но с "пересечением" всех полей всех классов, +1 поле для указания типа класса.


mrLanu [3 hours ago]
Я пока сделал по второму


mrLanu [3 hours ago]
Но сильный осадок у меня

Dmitriy Kozin [3 hours ago]
Это удобно, если у классов одинаковые поля..


mrLanu [3 hours ago]
В том то и дело, что они только пока одинаковы... буду думать над первым вариантом


dmitry_ov [3 hours ago]
@mrLanu Если ты реализуешь иерархию категорий, то в одной таблице хранить и надо.
Каждая запись хранит id  своего родителя. Корневой элемент  в качестве id родителя хранит null (edited)



mrLanu [3 hours ago]
Короче мне походу не помешало бы подучить БД и запросы на выборку... всем спасибо


dmitry_ov [5:36 PM]
Это в hw1 ? :astonished:

Mikhail Makar [6:39 PM]
Кто как дату парсил в методе Post?

Ma3stro [6:46 PM]
Принимал строку (type="datetime-local"), а затем сплитом парсил и строил LocalDateTime (edited)

Ivan A [7:07 PM]
"""<c:forEach items="&{mealsWithExceeded}" var="meal" >
       <tr>
           <td>
               <c:out value="${meal.getDateTime()}"/>
           </td>
       </tr>

   </c:forEach>"""
~~~"""<c:forEach items="&{mealsWithExceeded}" var="meal" >
      <tr>
          <td>
              <c:out value="${meal.getDateTime()}"/>
          </td>
      </tr>

  </c:forEach>"""~~~
короч пишет javax.el.MethodNotFoundException: Method not found: class java.lang.String.getDateTime()
хотя в MealWithExceed стяот шеттеры

vch [7:08 PM]
@Ivan A апостроф, тот который у буквы `ё`

Ivan A [7:08 PM]
геттеры
да я понял
уже час бьюсь, поставил геттеры в MealWithExceed
и все равно выводит ошибку метод не найден

Mikhail Makar [7:10 PM]
Попроуй так     <c:set var="meals" value="${requestScope.meal}" />
где meal это твой список mealsWithExceeded

Ivan A [7:14 PM]
это в foreach
вставлять?
теперь выдает class java.util.Arrays$ArrayList.getDateTime()

Mikhail Makar [7:17 PM]
нет, до

Andrew [7:19 PM]
поменяй инициализацию
сделай ее не через Arrays.as
И лучше в EL обращении использовать ${meal.имя_поля} а не вызывать гетер

Ivan A [7:30 PM]
он почемуто читает как String когда проходит по циклу
а не MealWithExceed

Andrew [7:33 PM]
<c:forEach var="meal" items="${requestScope.get('mealList')}">
mealList - атрибут реквеста или сессии

Ivan A [7:38 PM]
спасибо
бро
битый час сидел из за этого

Andrew [7:38 PM]
Обидно)
я сегодня вместо того чтобы красотой дз занятся целый день со слаком провозился((

Aleksey Vra [7:54 PM]
народ, код выделяется 3мя символами ` тот что над ё

Yevhen Maksymovych [7:58 PM]
но ведь скоп реквеста и так доступен, достаточно указать ${mealList}
Andrew
<c:forEach var="meal" items="${requestScope.get('mealList')}">

realcorwin [8:07 PM]
кто-нибудь встречал понятный и подробный текст про всем request, response, attribute, scope, forward, get, redirect и прочая и прочая? где когда используется что, для чего и почему.

Andrew [8:09 PM]
Встречали in English
Head First servlets and JSP O'Reily

Yevhen Maksymovych [8:11 PM]
уии, я тоже на хероку задеплоил

mrLanu [1 hour ago]
Класно


Yevhen Maksymovych [8:11 PM]
https://javaops-hw01.herokuapp.com/

Andrew [8:12 PM]
@Yevhen Maksymovych и как оно сложно?)

Yevhen Maksymovych [8:13 PM]
да не, создал вилку, добавил зависимость в мавен, бросил в корень файл с параметрами запуска, и задеполил прямо из гита

vch [8:13 PM]
@Yevhen Maksymovych `java.lang.NumberFormatException: For input string: ""`
В первые 5 секунд тестирования... Невезучий я.

Yevhen Maksymovych [8:16 PM]
@vch, я знаю, тем нет никакой проверки на корректность введенных данных кроме маски на инпутах, все на коленке собрано

realcorwin [8:22 PM]
когда читаю, выражение "на хероку", начинаю непроизвольно улыбаться :slightly_smiling_face: "вот на хероку ты всё это задеплоил, а?!" :slightly_smiling_face:

Yevhen Maksymovych [8:23 PM]
чисто проверить, как система работает :slightly_smiling_face:

realcorwin [8:24 PM]
@Andrew хорошая идея с head first, поищу сейчас её на русском. а что-нибудь посерьёзнее кто-нибудь знает?

mrLanu [1 hour ago]
Посерьезнее  в документации:)


realcorwin [8:33 PM]
куча книг и курсов - на английском. на русском - почти одно старьё

vch [8:34 PM]
@realcorwin А что такого серьёзного изменилось в сервлетах за последние 10 лет?

realcorwin [8:37 PM]
да там не десять...

Andrew [8:42 PM]
Нужно нам привыкать, что первый язык программирования Английский.

aleksey [8:45 PM]
сейчас где-то взгрустнул 1С ник

realcorwin [8:46 PM]
нашёл на немецком :slightly_smiling_face:

realcorwin [8:52 PM]
забавно называется цикл head first на немецком - "с головы до ног" :slightly_smiling_face:

Dmitriy Kozin [9:09 PM]
Да она есть на русском.

realcorwin [9:10 PM]
можешь поделиться?


Grigory Kislin [1:37 AM]
@realcorwin
https://devcolibri.com/как-создать-servlet-полное-руководство/
http://java-course.ru/student/book1/servlet/
forward и redirect в видео есть (edited)

saudabaew [8:45 AM]
7 Работать с CRUD надо через интерфейс. - что это значит?

dustnfox [8 hours ago]
Объявить интерфейс. Далее все реализации CRUD (память, SQL и пр.) будут реализовывать этот интерфейс. Чтобы каждый раз при изменении DAO не  переписывать сервлет в нем нужно объявлять именно интерфейс, а не конкретную его реализацию.



saudabaew [7 hours ago]
спасибо!


saudabaew [7 hours ago]
И еще, я правильно понимаю, что вместо volatile переменной с дополнительными блоками синхронизации, можно использовать AtomicInteger в качестве счетчика id?


Pavel Zaitcev [7 hours ago]
при инкременте volatile счетчика происходит несколько операций. А неатомарные операции volatile - несинхронизированы. AtomicInteger же -  потокобезопасен.


Mikhail Makar [10:21 AM]
Кто как победил вот этот момент:
16 после операции delete в браузере должен быть url http:\\localhost:8080\topjava\meals

Dmitriy Kozin [6 hours ago]
`response.sendRedirect("meals");`


Yevhen Maksymovych [6 hours ago]
или делит делаешь постом и в action укажи "meal"


Yevhen Maksymovych [6 hours ago]
*meals


Dmitriy Kozin [6 hours ago]
Гетом. Делать пост с параметром нет смысла.. (edited)


Yevhen Maksymovych [6 hours ago]
это почему нет смысла? отправляем постом ид удаляемого элемента, сервлетом удаляем, и перенаправляем обратно на милз


Dmitriy Kozin [6 hours ago]
Получается что нужно делать скрытую форму, со скрытыми полями ид и акшионом на каждый элемент. Проще гетом ?id=1&action=delete..


Yevhen Maksymovych [6 hours ago]
это наоборот куда логичнее. действия выполняются постом, переход по ссылкам - гетом

Yevhen Maksymovych [6 hours ago]
"?id=1&action=delete" и пользователь таком образом может свободно удалить что-то в базе, что не должен, подставив там произвольный ид :slightly_smiling_face:


Dmitriy Kozin [6 hours ago]
Тогда можно и метод HTTP DELETE сделать и он уйдет в doDelete


Dmitriy Kozin [6 hours ago]
Пост не защищает от аналогичных действий пользователя. Можно запустить PostMan и любой запрос сформировать.


Yevhen Maksymovych [6 hours ago]
борьба идеологий :slightly_smiling_face: ну, ок, в реальной жизни этот делит бы бы jquery запросом, который пришёл бы постом


Dmitriy Kozin [6 hours ago]
Это уже на сервере проверяется имеет ли пользователь право делать такие запросы..


Dmitriy Kozin [6 hours ago]
А апдейт делать PUT ом в doPut :grin:


aleksey [3 hours ago]
только формы нынче не поддерживают put, delete методы


Dmitriy Kozin [2 hours ago]
`<input type="hidden" name="_method" value="DELETE">` вот так вроде должно работать. Через POST..


aleksey [2 hours ago]
Да, можно, но немного похоже на хак=)


Mikhail Makar [10:21 AM]
?

Artem Murk [11:13 AM]
Не пойму что я делаю не так при передаче атрибутов в JSP из Сервлет. При деплое в Томкат могу отобразить только toString моего meals(каждого значения mealList). IDEA не отображает что я передаю какой то атрибут, т.е. не видит вообще переменную. При попытке вывести что то наподобие meals.description выдает сразу ошибку. (edited)

Yevhen Maksymovych [5 hours ago]
не понял, у тебя jsp не видит атрибуты твоего mealList'а, или сервлет не видит то, что ты присылаешь ему из jsp-страницы?


Artem Murk [5 hours ago]
jsp не видит атрибуты, хотя как задеплоил в Томкат вывод получается только ТуСтрингом,


dustnfox [5 hours ago]
Геттеры есть у MealWithExceed? (edited)


Dmitriy Kozin [5 hours ago]
`<jsp:useBean id="meal" type="ru.javawebinar.topjava.model.MealWithExceed"/>` вот такая конструкция, внутри цикла подскажет идее и jsp что ты используешь определенный объект. После этого появятся свойства. И геттеры нужны.

Artem Murk [5 hours ago]
О, сейчас попробую. Геттеров нет, сделаю

Yevhen Maksymovych [5 hours ago]
но у тебя и не выведет meals.description

Yevhen Maksymovych [5 hours ago]
meals - это же лист


Yevhen Maksymovych [5 hours ago]
откуда у него description

Yevhen Maksymovych [5 hours ago]
description есть у meal'а который сидит в meals

Yevhen Maksymovych [5 hours ago]
а у meals, понятное дело, есть туСтринг, сайз и чего там ещё

Yevhen Maksymovych [5 hours ago]
а дескрипшена нет, такие дела

Yevhen Maksymovych [5 hours ago]
а, сорри, заметил, что meals - это у тебя элемент mealList'а


Artem Murk [5 hours ago]
Я передавал MealWithExceed, а смотрел в Meal. Затупил. Но все равно мне приятно когда jstl видит объекты и различает что к нему пришло. Сейчас попробую как Дмитрий посоветовал прописать Бин


Yevhen Maksymovych [5 hours ago]
какое-то нелогичное название для элемента, не по java naming conventions (edited)

Dmitriy Kozin [5 hours ago]
Женя, ты сейчас вообще о чем? )

Artem Murk [5 hours ago]
если уж полное то     <c:forEach items="${MealWithExceedList}" var="meal">

Yevhen Maksymovych [5 hours ago]
ну, это я как обычно по верхам прочёл ))


Yevhen Maksymovych [5 hours ago]
за вот это зацепился " При попытке вывести что то наподобие meals.description выдает сразу ошибку"


Yevhen Maksymovych [5 hours ago]
а потом дочитал вопрос до начала )))


Yevhen Maksymovych [5 hours ago]
а как в слаке вставить кусок цитаты?


Yevhen Maksymovych [5 hours ago]
>тест

Yevhen Maksymovych [5 hours ago]
>>>тест 2

Dmitriy Kozin [5 hours ago]
Как ты так сделал?


Yevhen Maksymovych [5 hours ago]
ух ты, как я могу!  >При попытке вывести что то наподобие meals.description выдает сразу ошибку


Yevhen Maksymovych [5 hours ago]
а, вот так уже не выходит


Yevhen Maksymovych [5 hours ago]
а вот так? >>>При попытке вывести что то наподобие meals.description выдает сразу ошибку


Yevhen Maksymovych [5 hours ago]
короче, знак больше перед фразой

Yevhen Maksymovych [5 hours ago]
но только с новой строки если


Artem Murk [5 hours ago]
Всем спасибо, помогло!

Artem Murk [5 hours ago]
Можно ли как то бины выносить в отдельный файл, дабы они не засоряли мою JSP(на будущее спрашиваю).


Dmitriy Kozin [5 hours ago]
Я не знаю... В заголовок можно выносить, но дело в том, что у тебя переменная meal появляется в контексте цикла только...


Dmitriy Kozin [5 hours ago]
Переменные скоупа реквеста можно вынести в заголовок. В принципе можно обозначить прилетевшую meals как List<MealWithExceed> но что с ней будет в цикле не знаю..


Dmitriy Kozin [5 hours ago]
Может и сработать кстати..

Artem Murk [5 hours ago]
Ок, спасибо, буду иметь в виду. До этого пользовался Спринговским Сервлетом ModelAndView, проьлем таких не было.


Artem Murk [5 hours ago]
@Dmitriy Kozin а как можно указать что у List в котором MealWithExceed?


Dmitriy Kozin [5 hours ago]
Артем, не понял вопрос..


Artem Murk [5 hours ago]
Ты сказал что переменную скоупа реквеста можно вынести в заголовок. Я так понимаю что можно указать что у неё тип Лист. Ты также написал что можно как то её Дженерифицировать <MealWtihExceed>


Dmitriy Kozin [5 hours ago]
Да. Так лист и узнает что внутри лежат МилзыВичЭксид


Dmitriy Kozin [5 hours ago]
Стоп! В дженерик нужно прописать полный класснэйм - `ru.artem.mealapp.model.MealsWithExeeed`. Вспомнил )


Dmitriy Kozin [5 hours ago]
Напиши если сработает вся эта конструкция (в цикле появится переменная указанного типа). Мне лень у себя проверять )


Artem Murk [5 hours ago]
Шикарно,, работает)

Artem Murk [5 hours ago]
Спасибо!

Dmitriy Kozin [5 hours ago]
Блин, ты меня возбудил.. Пойду у себя переделаю..

Artem Murk [5 hours ago]
хахаха, ок)ъ

Dmitriy Kozin [5 hours ago]
Ххха! Точно, работает.. Круто! )



Dmitry Makarov [5 hours ago]
@Yevhen Maksymovych > должен быть в начале строки
>вот так


Yevhen Maksymovych [4 hours ago]
Ага

Artem Murk [4 hours ago]
@Dmitriy Kozin получилось сделать? У меня что то не выходит. Походу зависимости как то не так прописаны для jstl.

Artem Murk [4 hours ago]
Томкат ругается

dustnfox [4 hours ago]
На что ругается?

Artem Murk [4 hours ago]
Пишет что Бин не найден в скопе.

Artem Murk [4 hours ago]
как тут код выделить?


dustnfox [4 hours ago]
Покажи, что по поводу бина написал


Artem Murk [4 hours ago]
java.lang.InstantiationException: bean MealWithExceedList not found within scope - это последний Эксепшн


Artem Murk [4 hours ago]
```<jsp:useBean id="MealWithExceedList" type="java.util.List<ru.javawebinar.topjava.model.MealWithExceed>"/>```
собственно мой Бин (edited)


Dmitry Makarov [4 hours ago]
@Artem Murk ``` с двух сторон
>как тут код выделить?
(edited)


dustnfox [4 hours ago]
попробуй `scope="request"` в объявление бина дописать


Artem Murk [4 hours ago]
@dustnfox заработало, спасибо!


Sergey Mitrichev [2 hours ago]
Всем спасибо за эту ветку)):+1:


Andrew [2:01 PM]
Ребят, кто сделал дз, может обменяемся решениями ?

Anton Kiselev [4:15 PM]
Подскажите, пожалуйста, при delete как мне выйти на url-pat meals?
1) я в doGet ловлю параметр "удалить", удаляю. преобразую коллекцию, 2)перенаправляю снова в servlet с другим параметром(уже с выводом). 
3) здесь уже пересылаю запрос в jsp. Вывод есть. а url остается с параметром вывода.

Yevhen Maksymovych [4:29 PM]
точно перенаправляешь, а не форвардишь?
если перенаправляешь, должен юрл быть тот, который ты указываешь в sendRedirect

Yevhen Maksymovych [4:38 PM]
там где ты ловишь в doGet() после удаления делай resp.sendRedirect("meals") - после этого у тебя фактически в браузере юрл станет $APP_CONTEXT\meals, который опять уже попадёт в дуГет, но уже не в ветку, где ты обрабатываешь делит, а в дефолтную ветку
а там уже делай форвард на твой jsp, uri останется верным


Anton Kiselev [4:49 PM]
@Yevhen Maksymovych Ок, thanks. попробую

dyakoven [9:24 PM]
где правильно реализовать счетчик айдишника еды?

Yevhen Maksymovych [9:29 PM]
мне думается, нативно за этот счетчик отвечают механизмы бд. соответственно, счетчик тебе надо будет реализовать в том месте, где у тебя будет реализована твоя MockBd
т.к. сама база у тебя будет скорее всего в каком-нибудь мэпе, вряд ли ты будешь реализовать свою структуру, значит за счетчик будет отвечать класс, который работает с этим мэпом напрямую
дао, короче :slightly_smiling_face:

uraplayer [11:22 PM]
commented on Dmitriy Kozin’s file Чисто похвалиться
скинь ссылку на github посмотреть?

Alex83 [11:34 PM]
Приветствую, коллеги! Кто знает, как дебажить jsp в плагине томката в мавене? Сам томкат не ставил. Все работает, кроме дебага jsp. На старнице не отображатся данные, хотя в MealServlet приходят, проверял записью листа в лог

Mikhail Makar [1 day ago]
Ты передаешь список в jsp?


dmitry_ov [1 day ago]
forward или  редирект ?
При редиректе параметры запроса теряются


Alex83 [24 hours ago]
передаю список, делаю форвард


Alex83 [24 hours ago]
log.debug("start of ListMeal");
       //List<MealWithExceed> list = MealsUtil.getFilteredWithExceeded(mealDAO.getMeals(), LocalTime.MIN, LocalTime.MAX, 2000);
       //log.debug(list.toString());
       request.setAttribute("meals", MealsUtil.getFilteredWithExceeded(mealDAO.getMeals(), LocalTime.MIN, LocalTime.MAX, 2000));
       RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/meals.jsp");
       dispatcher.forward(request, response);
       log.debug("finish of ListMeal");


Alex83 [24 hours ago]
в jsp пишу так

Alex83 [24 hours ago]
<c:if test="${!empty meals}">
   <table class="tg">
       <tr>
           <th width="80">DateTime</th>
           <th width="80">DateTime formatted</th>
           <th width="120">Description</th>
           <th width="60">Calories</th>
       </tr>
       <!--
       public MealWithExceed(LocalDateTime dateTime, String description, int calories, boolean exceed)!-->
       <c:forEach items="${meals}" var="meal">
           <tr>
               <td>${meal.getDate()}</td>
               <td><ctg:format value="${meal.getDateTime()}" pattern="dd/MM/yyyy HH:mm:ss"/></td>
               <td>${meal.getDescription()}</td>
               <td>${meal.getCalories()}</td>
           </tr>
       </c:forEach>
   </table>
</c:if>


Alex83 [11:37 PM]
uploaded and commented on this image: image.png 

И вот такая шляпа получается.

Tanya [12:28 AM]
@Alex83
геттеры есть в MealWithExceed?

dmitry_ov [1 day ago]
Никто не мешает их добавить


Alex83 [1 day ago]
теперь есть) но не помогло


Tanya [1 day ago]
должно помочь, 
ctrl + f5?


Alex83 [1 day ago]
неа


Alex83 [1 day ago]
в реквест приходит


Alex83 [1 day ago]
на странице пусто (edited)


Alex83 [1:45 AM]
фух, не добавил в депенденси jstl, поэтому криво работало. каких-то 5 часов, чтобы понять, в чем дело. Осталось мелочь - раскраска )

Alex83 [2:22 AM]
uploaded and commented on this image: image.png 

Господи, красота-то какая!

Alex83 [2:22 AM]
Утром T уберу и домашка готова )

Dmitriy [8:14 AM]
а мне нравится везде прикручивать бутстрап, чтоб красиво было

Dmitriy Kozin [8:17 AM]
commented on Чисто похвалиться
https://github.com/dskozin/topjava/tree/HW01
vch [8:18 AM]
@Dmitriy Kozin ` new HashMap<>();` Я б лучше застрелился, чем таким хвалиться...
Dmitriy Kozin [8:21 AM]
Да застрелись уже.
Dmitriy Kozin [8:21 AM]
Можешь по тихому убиться без комментариев.

Dmitry Neustupov [8:31 AM]
@vch а в чем проблема?

vch [8:44 AM]
@Dmitry Neustupov ` private final Map<Long, Meal> storage = new HashMap<>();`
HashMap нельзя использовать при многопоточной работе, нужен `ConcurrentHashMap `. Причём, насколько я помню, автор уже исправил это, но по каким-то причинам забыл залить в github.

Dmitry Neustupov [8:53 AM]
@vch да, у меня тоже new ConcurrentHashMap<>() стоит, туплю что то с утра )

Victor Shinkarev [8:58 AM]
Как думаете, уместно ли использовать в данном задании паттерн command? Или это лишнее?

Dmitriy Kozin [9:25 AM]
commented on Чисто похвалиться
Залил с Конкурентом. Все равное это скорей всего не правильно.

Timur [9:32 AM]
@Alex83 цвета наоборот(:thinking_face: вроде бы)

Yevhen Maksymovych [11:19 AM]
ребят, подскажите по hw1 - мы здесь сделали собственную функцию для форматирования даты,  подключили ее в нашу jsp-страницу
в тэге <uri> самой функции указали "http://topjava.javawebinar.ru/functions"
и в meals.jsp при ее подключении - "<%@ taglib prefix="fn" uri="http://topjava.javawebinar.ru/functions" %>"

Yevhen Maksymovych [11:21 AM]
но ведь функция фактически не сидит на этом url, физически она лежит на одном хосте с jsp-страницей

Aleksey Vra [1 day ago]
мавен подтягивает библиотеку jstl, которую мы в pom указали.. у меня сюда
```/home/vra/.m2/repository/javax/servlet/jstl/1.2/jstl-1.2```
скачивает и видимо затем отсюда берет при сборке


Aleksey Vra [1 day ago]
если навести на либу в meals.jsp путь показывается


Yevhen Maksymovych [11:22 AM]
значит ли это, что отрисовщик jsp и за остальными схемами не обращается на урлы, которые указаны в заголовках xml-страниц, а берёт их где-то локально?
вот все эти "xmlns="http://java.sun.com/xml/ns/javaee""

Хэм [11:30 AM]
ага тож заинтересовался этим вопросом

Хэм [11:36 AM]
а кто как реализовал репозиторий? я так понимаю все через ConcurrentHashMap? никто БД не делал? если через мапу, то при добавлении новой еды она проходит проверку превышения лимита по калориям? а то я тут что то понаделал такое, что не знаю как новую еду добавить на проверку калорий со всей мапой

angelrum [11:40 AM]
Все правильно, лучше заложить индекс в dao класс, потому что мы его получаем при выгрузке данных из БД. Но в текущей реализации можно обойтись произвольным индексом и заложить его jsp страницу силами jstl. (edited)
Yevhen Maksymovych
мне думается, нативно за этот счетчик отвечают механизмы бд. соответственно, счетчик тебе надо будет реализовать в том месте, где у тебя будет реализована твоя MockBd
К примеру: 
<c:set var="i" value="0"/>
<c:forEach items="${meals}" var="meal">
    <c:out value="${i}"/>//вывод значение индекса
    <c:set var="i" value="${i + 1}"/> //Присваиваем следующее значение
</c:forEach> (edited)
Полезный ресурс по тэгам jstl: https://www.tutorialspoint.com/jsp/jsp_standard_tag_library.htm
www.tutorialspoint.com
JSP Standard Tag Library (JSTL) Tutorial
JSP Standard Tag Library (JSTL) Tutorial - Learn JSP (Java Server Pages) in simple and easy steps starting from basic to advanced concepts with examples including Java JSP Technology including Overview, Environment Setup, Architecture, Lifecycle, Syntax, Directives, Actions, Implicit Objects, Client Request, Server Response, Form Data, HTTP Request Header, Response Header, Status Codes, Writing Filters, Cookies Handling Session Tracking, File Uploading, Handling Date, Page Redirect, Hits Counter, Show more

Artem Murk [1:17 PM]
Ребят, решил тоже организовать через ConcurentHashMap. При попытке писать в неё вылетает nullPointerException. При обычной HashMap все работает

Nedfrench [2:30 PM]
Ура! Выполнил HW1.  Спасибо 8 марта за выходной день))

Ivan A [5:28 PM]
делаю кнопку edit или delete  <td><a class="delete" href=ЧТО СЮДА ПРОПИСАТЬ как сюда вытащить id из бд>Delete</a></td>

Aleksey Vra [1 day ago]
```href="meals?action=delete&id=${meal.id}"```


Ivan A [1 day ago]
спс


Artem Murk [5:51 PM]
Не пойму как лучше прикрутить форму jsp отвечающую за update/create. У меня сервлет на doPost в mealServlet принимает принимает запросы с meals, и соотвественно перенаправляет на updateCreate.jsp. Неужели ещё один сервлет нужно создавать?

uraplayer [7:25 PM]
commented on Dmitriy Kozin’s file Чисто похвалиться
@Dmitriy Kozin спасибо!

Sergey Kubatko [11:03 PM]
друзья, есть один вопрос: у меня Mac OS, мне не удалось в файле logback.xml прописать строку с именем файла для сохранения в виде относительного пути, 
вот здесь: <appender name="file" class="ch.qos.logback.core.FileAppender">
<file>/Volumes/Home/Documents/3. Personal/2. Projects/ИТ/4. Projects/2. Java/1. General/topjava/log/topjava.log</file>
есть ли возможность задать относительный путь без определения дополнительной переменной окружения?

dmitry_ov [11:32 PM]
added and commented on this Shell snippet: Untitled 
Запускаем программу "Terminal"
Вводим команду:
export TOPJAVA_ROOT="/Volumes/Home/Documents/3. Personal/2. Projects/ИТ/4. Projects/2. Java/1. General/topjava/log/topjava.log"
​
Эта команда создаст переменную окружения TOPJAVA_ROOT. Проверить что создалась можно командой
echo $TOPJAVA_ROOT
​
Глобальных переменных окружения в *nix нет. Поэтому создание переменной надо добавить в файл который выполняется при логине пользователя в систему ~/.bash_profile
Добавляешь в конец файла ~/.bash_profile строку: 
export TOPJAVA_ROOT="/Volumes/Home/Documents/3. Personal/2. Projects/ИТ/4. Projects/2. Java/1. General/topjava/log/topjava.log"
Collapse 
@Sergey Kubatko

Sergey Kubatko [12:21 AM]
commented on dmitry_ov’s snippet Untitled
да, спасибо, также в IDEA нашел возможность установить переменную

Kirilo [1:16 AM]
может кто сталкивался. При удалении элемента с таблицы и списка, остается старая ссылка на элемент, хотя фактически в jsp подается измененный список. Почему в списке id меняется, строка с таблицы удаляется, а ссылка остается старой? http://localhost:8080/topjava/meals?action=edit&mealId=3                                                         https://screenshots.firefox.com/dGMoTUVf5o0ab3m5/localhost (edited)
screenshots.firefox.com
Add or edit meal
From localhost
https://screenshotscdn.firefoxusercontent.com/images/ae41c1f8-4a4d-40b4-9dc3-fc103f277713.png?embedded=og
то есть в конце запроса должно было бы быть 4, а там остается 3
https://screenshots.firefox.com/YIjlDOtvLRD01MiX/localhost
screenshots.firefox.com
Meals
From localhost
https://screenshotscdn.firefoxusercontent.com/images/83f11071-2721-4e01-a303-563b6c49b1f3.png?embedded=og

Tanya [2:22 AM]
@Kirilo у тебя id могут меняться?

Kirilo [2:26 AM]
Да, они меняются после удаления
на 1 почему-то

Tanya [2:27 AM]
неправильный подход
id не должны меняться и не должны зависеть от др. записей (edited)

Kirilo [2:32 AM]
спасибо, это натолкнуло меня на мысль где искать.

Tanya [2:33 AM]
пожалуйста :slightly_smiling_face:

Kirilo [2:50 AM]
не. id не меняется, зато неправильно формируется запрос, вот там и разбежность. Получается, что запросы привязаны к порядковому номеру элемента...
Вернее, если так сделать, то будет правильно выводиться. Вручную все правильно выводит. (edited)

Kirilo [3:31 AM]
Ошибка была в этом методе: @Override
   public Meal getMealById(int mealId) {...} Вместо id искал по номеру элемента :slightly_smiling_face: (edited)

Ilya [6:19 AM]
Всем добра! Наконец-то дошли руки доделать опшинал, но есть косячок с кодировкой - при отправке с формы русского текста приходят кракозябры - подскажите, плз, где подкрутить ?

Aleksey Vra [18 hours ago]
```request.setCharacterEncoding("UTF-8");```
как то так


Ilya [18 hours ago]
@Aleksey Vra Не помогает, результат такой же ÐÐ°Ð²ÑÑÐ°Ðº , но спасибо!

Ilya [18 hours ago]
т.е. проблема не в глобальном не правильном отображении еды - когда идет выгрузка захардкоденных милов, то все ок. но когда начинаешь редактировать или добавлять с формы, то беда.


Aleksey Vra [18 hours ago]
у меня что то похожее было, указание
```request.setCharacterEncoding("UTF-8");```
в начале doPost помогло


Aleksey Vra [18 hours ago]
как вариант в другом браузере попробовать, посмотреть что придет


Ilya [18 hours ago]
@Aleksey Vra оу, переместил в начало, и все ок. Спасибо тебе большое!


Artem Murk [11:03 AM]
Привет ребят. Подскажите как сделать отправку формы с updateCreate.jsp на сервлет. А именно как отправить данные которые я внёс в форму
Ок, криво, но разобрался)))

Artem Murk [11:39 AM]
Ураа. Я сделал hw1 и опшинал. Конечно остался у меня косяк с редиректами в get post, в остальном все норм. Такое чувство что я последний кто остался в этой ветке...

pro [13 hours ago]
молоток раз сделал; пока прикинешь что тебе посоветовать, ты, хоть и криво, но сам разбираешься, так что ни добавить ни отнять


Artem Murk [12 hours ago]
Да если честно у меня есть проблемы с Сервлетами. Надо читать как лучше слать данные и как перенаправлять запросы. Информации море, а стажировка не стоит на месте. Решил максимально стараться делать нормально учитывая все пункты в задании, но если не буду успевать то буду делать криво и двигаться дальше.



pro [12 hours ago]
верняк, пробежался по верхам, сделал задание, а потом снова пролистываешь и если есть время, углубляешься в детали.


pro [12 hours ago]
когда уже пробовал делать что нибудь в той или иной области, тогда и вопросы сформировались у тебя, уже знаешь, на чем тебе акцентировать внимание


uraplayer [9:49 PM]
Смотрел разбор дз optional, Григорий объясняет неплохо, но для меня недостаточно детально (не разжеванно). Явно уже для тех, кто хорошо разбирается во всех технологиях. Когда применяешь патчи - появляется уже готовый код. как он рождался к сожалению не видно.
Можете пояснить что делает <td><a href="meals?action=update&id=${meal.id}">Update</a></td>
Григорий говорит про action, что это такое?

VictorStatko [9:54 PM]
Это ссылка, ведет на сервлет meals, при этом передаются параметры action и id со значениями update и ${meal.id} соответственно. В сервлете сработает метод doGet

uraplayer [10:02 PM]
откуда взялся этот за параметр action? это вот сюда попадает в метод doGet? String action = request.getParameter("action");

ilya t. [10:05 PM]
да, получаешь строку из request и обрабатываешь соответственно

uraplayer [10:07 PM]
А. понял, это кусок URL (ссылка под кнопкой UPDATE), она приходит на сервлет, он ее обрабатывает в зависимости от параметра и выполняет правильный метод. Спасибо

uraplayer [10:08 PM]
А эта запись с параметрами это относится к html?

aleksey [2 hours ago]
Это относится к http. Принят такой формат записи URL параметров



aleksey [2 hours ago]
Например https://webgyry.info/http-zapros-metodom-get


uraplayer [10:18 PM]
Еще нубский вопрос, можете на примере поянить разницу между doGet и doPost?

aleksey [2 hours ago]
Это опять же относится к http
https://ru.m.wikipedia.org/wiki/HTTP
Wikipedia
HTTP
HTTP (англ. HyperText Transfer Protocol — «протокол передачи гипертекста») — протокол прикладного уровня передачи данных (изначально — в виде гипертекстовых документов в формате «HTML», в настоящий момент используется для передачи произвольных данных). Основой HTTP является технология «клиент-сервер», то есть предполагается существование:

Потребителей (клиентов), которые инициируют соединение и посылают запрос;
Поставщиков (серверов), которые ожидают соединения для получения запроса, производят Show more… (8 kB)


aleksey [2 hours ago]
В кратце, у сервлета есть метод  service, он обрабатывает все запросы приходящие на сервлет. И в зависимости от метода запроса GET, POST, PUT, DELETE... вызывает соответствующий обработчик doPost, doGet и т.д.
Http это тема которую нужно очень четко понимать, без нее невозможно понять клиент-серверное взаимодействие


uraplayer [2 hours ago]
а в каком месте в *.jsp мы вызываем метод doPost?


aleksey [2 hours ago]
doPost вызывается в обычном сервлете, а из него объекты request и response передаются в jsp


uraplayer [2 hours ago]
да, я с этой темой реально плыву, подскажи что почитать, может есть туториал по http на примерах?


aleksey [2 hours ago]
https://habrahabr.ru/post/215117/
Хабрахабр
Простым языком об HTTP
Вашему вниманию предлагается описание основных аспектов протокола HTTP — сетевого протокола, с начала 90-х и по сей день позволяющего вашему браузеру загружать... (50 kB)


aleksey [2 hours ago]
https://www.youtube.com/watch?v=HFt7Lm7hv1E
YouTube Технострим Mail.Ru Group
6. Web-технологии. Протокол HTTP | Технострим
 


aleksey [2 hours ago]
И еще очень советую послушать эту лекцию о стеке протоколов tcp/ip
https://www.youtube.com/watch?v=Z-a7MNStFQs
YouTube Образовательный IT-портал GeekBrains
Основы сетей передачи данных. Модель OSI и стек протоколов TCP IP. Основы Ethernet. [GeekBrains]
 


uraplayer [2 hours ago]
Спасибо. правильно я понял, что когда мы нажимаем на ссылку meals запускается сервлет meals и вызывает метод doPost? (edited)


aleksey [2 hours ago]
когда нажимается ссылка, браузер формирует http запрос, который идет на сервер, там уже он обрабатывается сервлетом.
Важно понимать, что jsp не запускается у клиента на браузере. jsp формирует статическую html страницу и отправляет ее клиенту где он ее и видит в окне браузера. И на странице в барузере уже нт никаких jsp тегов, java кода и т.д. только html


Kirilo [4:52 AM]
В нашем случае средствами doGet мы отправляем параметры, в doPost получаем. doGet, в отличии от doPost не скрывает свой запрос и в браузере в адресной строке остается след, что с точки зрения безопасности неочень. Например, через doGet секрктные данные(логин, пароль и т.д.) точно не стоит передавать. (edited)

uraplayer [7:34 PM]
Проект был сначала под Windows, где я настроил переменную окружения без проблем. Сейчас перешел на macOS Sierra 10.12.6, а как тут это выполняется? - Установите переменную окружения на TOPJAVA_ROOT на корень проекта и перезапустите IDEA. (edited)

mrLanu [21 hours ago]
mentioned dmitry_ov’s Shell snippet
Запускаем программу "Terminal"
Вводим команду:
export TOPJAVA_ROOT="/Volumes/Home/Documents/3. Personal/2. Projects/ИТ/4. Projects/2. Java/1. General/topjava/log/topjava.log"
​
Эта команда создаст переменную окружения TOPJAVA_ROOT. Проверить что создалась можно командой
2 Comments Collapse


v.chernyshoff [21 hours ago]
Просто заходишь в IDEA в настройки tomcat и во вкладке startup/connection заводишь переменные.


uraplayer [20 hours ago]
@mrLanu Спасибо, теперь пишется в лог.


uraplayer [7:57 PM]
После перезагрузки IDEA и запуске выдает вот какое сообщение

uraplayer [20 hours ago]
Отвечу себе https://stackoverflow.com/questions/18794573/class-javalaunchhelper-is-implemented-in-both-libinstrument-dylib-one-of-th
stackoverflow.com
Class JavaLaunchHelper is implemented in both ... libinstrument.dylib. One of the two will be used. Which one is undefined
I upgraded to the latest Java 7 u40 on MacOS X and started getting the following message on the console when launching my application using Eclipse. The app works fine but I would like to find out ...



uraplayer [7:57 PM]
objc[3739]: Class JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.8.0_111.jdk/Contents/Home/bin/java (0x10a8ca4c0) and /Library/Java/JavaVirtualMachines/jdk1.8.0_111.jdk/Contents/Home/jre/lib/libinstrument.dylib (0x10a9984e0). One of the two will be used. Which one is undefined.

uraplayer [7:59 PM]
uploaded this image: Снимок экрана 2018-03-10 в 19.58.26.png 


Евгений [8:55 PM]
Всем привет! Тут еще есть кто-нибудь? А то я только подключился:) Подскажите, пож-та, в каком месте нужно хардкодить список еды? В MealsUtils создать метод для этого? Не совсем понятно

aleksey [19 hours ago]
В том же класса где эта еда хранится, там лучше и хардкодить.


Евгений [19 hours ago]
Не понял. Разве у нас для еды есть какое-то хранилище?


aleksey [19 hours ago]
нужно создать структуру, которая как бы будет играть роль бд и хранить Meal.


Grigory Kislin [18 hours ago]
up to you- где тебе кажется правильным


Евгений [18 hours ago]
спасибо за подсказки)


Andrew Manik [10:28 PM]
Доброй ночи, на всякий случай кидаю сюда, может кому-то в будущем пригодится по настройке TomCat
Суть проблемы:
                проект не деплоится вручную ни через менеджер томката, ни через копипаст.
                При том, что из IntelliJ IDE все работает нормально.
Что было у меня:
               какое-то время назад, а именно между занятиями решил поставить AndroidStudio со всеми прибамбасами,
               а именно NVPACK\jdk1.7.0_71. Будучи самым "умным" я даже не догадался подумать, что он перепишет JAVA_HOME.
               Итог: при запуске томката он брал jdk1.7xxx и, как следствие, выдавал неожиданные ошибки на тех заданиях,
                          которые еще несколько дней назад работали. 
Решение: поправил JAVA_HOME и все заработало.

Artem Murk [11:21 PM]
@Andrew Manik спасибо, не думал что такие проблемы могут быть. Конда я заглядывал в последний раз у меня данная переменная указывала на 1.9 Java, хоть проблем сейчас нет, но если появятся то буду знать куда заглянуть на случай. П.С. Когда делал проект на 9 намучался с зависимостями.

Andrew Manik [10:15 AM]
еще одно наблюдение за поведением TomCat: если делать deploy через web интерфейс в «Microsoft Edge» то он формирует ссылку убрав все "/" и, как следствие, это не работает, а через Chrome — все без проблем. Mozila — как Edge.
У кого-нибудь есть мысль, как это поправить? (edited)

Yevhen Maksymovych [10:21 AM]
Мне приходят в голову два очевидных варианта
1. Деплоить через хром
2. Не деплоить через веб

Alex83 [12:13 PM]
Что-то веб как-то мучительно больно дается

realcorwin [12:14 PM]
всё, что знаешь, - просто. что не знаешь - сложно. разберёшься :slightly_smiling_face:

Alex83 [12:14 PM]
uploaded this image: image.png 


Alex83 [12:15 PM]
столько мучений, чтобы запилить сайт а ля начало 90-х )
переходим к HW2 )

realcorwin [12:15 PM]
потому что Java :slightly_smiling_face: она не для таких сайтов создавалась :slightly_smiling_face:
15 лет назад я сайты на Cold Fusion делал. вот где было легко и приятно :slightly_smiling_face:

Dmitry Neustupov [1:18 PM]
@Alex83 там, где перебор по калориям, должно же быть красным, не?

Alex83 [1:26 PM]
Да, перепутал цвета немного)
@Dmitry Neustupov Спасибо!

Timur [3:24 PM]
засунуть форматтер в jsp для того,чтобы вывести дату без T правильно?

Mikhail Makar [3:27 PM]
DateTimeFormatter лучше разместить в сервлете, а затем его передать в jsp и там его использовать


Alex83 [5:18 PM]
@Timur я делал так
1) в депенденси добавил
       <dependency>
           <groupId>net.sargue</groupId>
           <artifactId>java-time-jsptags</artifactId>
           <version>1.1.4</version>
       </dependency>
2) в jsp добавил <%@ taglib uri="http://sargue.net/jsptags/time" prefix="javatime" %>
и <th style="${meal.isExceed() ? 'background-color: green':'background-color: red'}"><javatime:format value="${meal.getDateTime()}" pattern="dd/MM/yyyy HH:mm:ss" /></th>

Евгений [9:08 PM]
uploaded and commented on this image: ст1.JPG 

Народ, а у кого-нибудь были проблемы с кодировкой на JSP страницах? У меня при первом запуске все норм, описание на русском языке работает. По после того, как ввожу новые данные на странице editMeal.jsp - на главной снова отображается тарабарщина :confused:

Евгений [9:08 PM]
uploaded this image: ст2.JPG 


Евгений [9:09 PM]
uploaded this image: ст3.JPG 


Евгений [9:09 PM]
не пойму, в какой момент работы сбивается кодировка:/

ilya t. [9:10 PM]
а ты в методах сервлета явно указывал кодировку?
request.setCharacterEncoding( "UTF-8" )
такое должно быть перед реализацией doGet например

Евгений [9:25 PM]
в doGet было, а вот в doPost забыл)) благодарю

dyakoven [3:07 PM]
как проверить правильность создания переменной TOPJAVA_ROOT? перезапускал IDEA, проверяю в терминале - указывает правильно на корень проекта. а вот при логировании в консоль пишет но файл с логами не создается. если в logback.xml прописываю полный путь - работает

Dmitry Makarov [24 hours ago]
`System.getenv("TOPJAVA_ROOT")` в программе
`echo %TOPJAVA_ROOT%` в Windows
`echo $TOPJAVA_ROOT` Linux


Dmitry Makarov [24 hours ago]
Компьютер перезагружал?



dyakoven [24 hours ago]
вот как раз самое важное сделать забыл) спасибо, перезагрузка помогла


Grigory Kislin [21 hours ago]
вообще в уроке же есть рядом- как из java проверить


dyakoven [21 hours ago]
я поэтому сюда и написал, потому что всё это проверил. ИДЕЮ рестартовал, а вот саму машину - нет


Timur [7:24 PM]
@Alex83 @Mikhail Makar спасибо за ответ


Евгений Глушков [11:18 AM]
Подскажите кто знает: почему не получается из сервлета обратиться к jsp странице находящейся в WEB-INF?

Grigory Kislin [6 hours ago]
наши jsp перенесем в web-inf позднее


Alex [1 day ago]
А как ты обращаешься? Если форвард, то просто изменить путь
```request.getRequestDispatcher("/WEB-INF/users.jsp").forward(request, response);```
а редирект вроде не будет работать с веб-инф, потому что новый запрос генерирует, а веб-инф внутренняя директория проекта.


Alex [11:38 AM]
а что предпочтительнее в JSP использовать - Expression language, который ${} или JSP Expressions - типа скриплетов, выражении?

Dmitry Makarov [13 hours ago]
Предпочтительнее EL
https://stackoverflow.com/a/3180202
stackoverflow.com
How to avoid Java code in JSP files?
I'm new to Java EE and I know that something like the following three lines <%= x+1 %> <%= request.getParameter("name") %> <%! counter++; %> is an old school way of coding and i...


eageev [1:37 PM]
Делаю рефакторинг HW0 согласно видео 1го урока. Нашел NPE. Для того, чтобы его не было нужен containsKey:
mealsExceeded.add(new UserMealWithExceed(dateTime, meal.getDescription(), meal.getCalories(),
   caloriesSumPerDay.containsKey(curDate) && caloriesSumPerDay.get(curDate) > caloriesPerDay)
);

vch [1:43 PM]
@eageev Т.е. у тебя реально вылетает NPE при каких-то входных данных?

eageev [1:45 PM]
если даты не будет во вспомогательной мапе, приложение упадет. поправьте в патче.
Элементарно. Комментируем одну строку кода - добавление в мап и получаем NPE:


eageev [Mar 27th at 1:47 PM]
in #hw1
final Map<LocalDate, Integer> caloriesSumByDate = new HashMap<>();
       //meals.forEach(meal -> caloriesSumByDate.merge(meal.getDate(), meal.getCalories(), Integer::sum));

       final List<MealWithExceed> mealsWithExceeded = new ArrayList<>();
       meals.forEach(meal -> {
           if (TimeUtil.isBetween(meal.getTime(), startTime, endTime)) {
               mealsWithExceeded.add(createWithExceed(meal, caloriesSumByDate.get(meal.getDate()) > caloriesPerDay));
           }
       });


1 reply
Grigory Kislin [1 day ago]
не нужно. как же она может не быть в мапе??


eageev [Mar 27th at 5:43 PM]
in #hw1
По HW1 2 вопроса:
1. Почему не работает чрз <javatime:parseLocalDateTime value="${date}" pattern="yyyy-MM-dd" var="parsedDate" /> ?
2. Почему удаление работает в CopyOnWriteArrayList, но не работает просто с ArrayList? Односложный ответ, что в 1м случае либа concurrent не подойдет - это я знаю.


5 replies
goodhoopoe [1 day ago]
по 2. CopyOnWriteArrayList создаёт новую копию списка каждый раз, когда выполняется модифицирующая операция, и гарантируется, что её итераторы возвращают состояние списка на момент, когда итератор был сконструирован и не выкинут ConcurrentModificationException. Нет необходимости клонировать список до перебора или блокировать его во время перебора, потому что копия списка, которую видит итератор, не будет изменяться. Другими словами, CopyOnWriteArrayList содержит изменяемую ссылку на неизменяемый массив, поэтому до тех пор, пока эта ссылка остаётся фиксированной, вы получаете все преимущества потокобезопасности от неизменности без необходимости блокировок.


goodhoopoe [1 day ago]
все очевидно же


eageev [1 day ago]
Ок. 1000 и 1 раз проходил ArrayList итератором и делал remove любого элемента. И проблем не было. Только сегодня в сервлете. Надеюсь, вы в курсе, что только итератор позволяет так делать.


Alex [10 hours ago]
Один инстанс Эрррэйлиста в разных потоках без синхронизации?  Да даже в двух потоках экзепшн вылетает. Суть листа в безопасном использовании многими потоками одновременно, чего не обеспечивает эррэйлист (edited)


eageev [6 hours ago]
Ну на сервлет я тоже не заходил с 2х юзеров одновременно. Потоки тоже не создаю. Так что странно.


Grigory Kislin [15 days ago]
1 javatime:parseLocalDateTime  - а подключил jar? в стандартной реализации же этого нет


Grigory Kislin [15 days ago]
2. уточни вопрос. если в в том, что ты получаешь ConcurrentModificationException в ArrayList то если гугл не помогает приведи код


sergentum [Today at 4:32 PM]
in #hw1
подскажите пожалуйста, после hw0 патчи 2_0_add_fix.patch и 2_1_HW1.patch говорят Missing Base 3 файла, как накатить патч или правильный вопрос какой патч?


1 reply
Grigory Kislin [4 hours ago]
патчи накатываешь все по порядку
если не накатывается- см. https://github.com/JavaOPs/topjava/wiki/git#patch-%D0%BD%D0%B5-%D0%BD%D0%B0%D0%BA%D0%B0%D1%82%D1%8B%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F-%D0%BF%D1%80%D0%B5%D0%B4%D0%BB%D0%B0%D0%B3%D0%B0%D0%B5%D1%82-merge


sergentum [4:36 PM]
блин просто имена файлов поменялись кажется


Baravader [5:19 PM]
Подскажите пожалуйста,а MealsWithExceeded куда подевался?:thinking_face:

Baravader [5:20 PM]
uploaded this image: Pasted image at 2018-04-19, 5:19 PM 
